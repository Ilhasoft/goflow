<html>

<head>
    <title>Flow Specification</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background-color: #fcfcfc;
            font-family: "Roboto Slab", "ff-tisa-web-pro", "Georgia", Arial, sans-serif;
            width: 800px;
            margin-left: auto;
            margin-right: auto;
            -webkit-print-color-adjust: exact;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Roboto Slab", "ff-tisa-web-pro", "Georgia", Arial, sans-serif;
            margin: 20px 0 10px;
            padding: 0;
            font-weight: bold;
        }

        h1 {
            font-size: 24px;
            color: #333;
        }

        h2 {
            font-size: 18px;
            color: white;
            border: 1px solid #444;
            background-color: #555;
            padding: 5px;
        }

        .context h2 {
            background-color: rgb(153, 130, 30);
            border: 1px solid rgb(107, 79, 17);
        }

        .functions h2 {
            background-color: #2B823A;
            border: 1px solid #10621E;
        }

        .tests h2 {
            background-color: #8b257e;
            border: 1px solid rgb(78, 14, 64);
        }

        .actions h2 {
            background-color: #246068;
            border: 1px solid #0E464E;
        }

        .events h2 {
            background-color: #AA4139;
            border: 1px solid #801D15;
        }

        h3 {
            font-size: 16px;
            margin: 10px 0px 0px 0px;
            color: #333;
        }

        h4 {
            font-size: 16px;
            color: #333
        }

        h5 {
            font-size: 14px;
            color: #333
        }

        h6 {
            color: #777;
            font-size: 14px
        }

        .highlight pre {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
        }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
        }

        code .dt {
            color: #333;
            font-weight: bold;
        }

        code .st {
            color: #458;
        }

        .actions h1 {
            color: #333;
        }

        .input_action {
            position: relative;
        }

        .input_action h3 {
            position: absolute;
            right: 15px;
            color: #888;
        }

        .output_event {
            position: relative;
        }

        .output_event h3 {
            position: absolute;
            right: 15px;
            color: #888;
        }

        p code,
        li code {
            color: white;
            background-color: #444;
            border-radius: 3px;
            padding: 0px 4px 1px 4px;
        }

        .excellent_functions ul {
            padding-left: 15px;
        }

        .excellent_functions ul li {
            list-style-type: none;
        }
    </style>

</head>

<body>
    <center>
        <h1>Flow Specification</h1>
    </center>

 
    
 
    
 
    
 <ul>
 <li><a href="#container">Container</a></li>
 <li><a href="#nodes">Nodes</a></li>
 <li><a href="#routers">Routers</a></li>
 <li><a href="#waits">Waits</a></li>
 <li><a href="#context">Context</a></li>
 <li><a href="#template-functions">Template Functions</a></li>
 <li><a href="#router-tests">Router Tests</a></li>
 <li><a href="#action-definitions">Action Definitions</a></li>
 <li><a href="#event-definitions">Event Definitions</a></li>
 </ul>  
    
<h1 id="container">Container</h1>
<p>Flow definitions are defined as a list of nodes, the first node being the entry into the flow. The simplest possible flow containing no nodes whatsoever (and therefore being a no-op) can be defined as follows and includes only the UUID of the flow, its name and the authoring language for the flow:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Empty Flow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7bb5e7c-ad49-4e65-9e24-bf7f1e4ff00a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="dt">&quot;nodes&quot;</span><span class="fu">:</span> <span class="ot">[]</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
<h1 id="nodes">Nodes</h1>
<p>Flow definitions are composed of zero or more Nodes, the first node is always the entry node.</p>
<p>A Node consists of:</p>
<ul>
<li><code>actions</code> a list of 0-n actions which will be executed upon first entering a Node</li>
<li><code>wait</code> an optional pause in the flow waiting for some event to occur, such as a contact responding, a timeout for that response or a subflow completing</li>
<li><code>exit</code> a list of 0-n exits which can be used to link to other Nodes</li>
<li><code>router</code> an optional router which determines which exit to take</li>
</ul>
<p>At its simplest, a node can be just a single action with no exits, wait or router, such as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;5a06445e-d790-4bd3-a10b-b47bdcc9abed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    <span class="dt">&quot;actions&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;abc0a2bf-6b4a-4ee0-83e1-1eebae6948ac&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;What is your name?&quot;</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
<p>If a node wishes to route to another node, it can do so by defining one or more exits, each with the UUID of the node that is next. Without a router defined, the first exit will always be taken.</p>
<p>An exit consists of:</p>
<ul>
<li><code>uuid</code> the uuid of this exit</li>
<li><code>destination_node_uuid</code> the uuid of the node that should be visited if this exit is chosen by the router (optional)</li>
<li><code>name</code> a name for this exit (optional)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;5a06445e-d790-4bd3-a10b-b47bdcc9abed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">&quot;actions&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;abc0a2bf-6b4a-4ee0-83e1-1eebae6948ac&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;What is your name?&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">    <span class="fu">}</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">    <span class="dt">&quot;exits&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;eb7defc9-3c66-4dfc-80bc-825567ccd9de&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="fu">}</span></a></code></pre></div>
<h1 id="routers">Routers</h1>
<h2 id="switch">Switch</h2>
<p>If a node wishes to route differently based on some state, it can add a <code>switch</code> router which defines one or more <code>cases</code>. Each case defines a <code>type</code> which is the name of an expression function that is run by passing the evaluation of <code>operand</code> as the first argument. Cases may define additional arguments using the <code>arguments</code> array on a case. If no case evaluates to true, then the <code>default_exit_uuid</code> will be used otherwise flow execution will stop.</p>
<p>A switch router may also define a <code>result_name</code> parameters which will save the result of the case which evaluated as true.</p>
<p>A switch router consists of:</p>
<ul>
<li><code>operand</code> the expression which will be evaluated against each of our cases</li>
<li><code>default_exit_uuid</code> the uuid of the default exit to take if no case matches (optional)</li>
<li><code>result_name</code> the name of the result which should be written when the switch is evaluated (optional)</li>
<li><code>cases</code> a list of 1-n cases which are evaluated in order until one is true</li>
</ul>
<p>Each case consists of:</p>
<ul>
<li><code>uuid</code> a unique uuid for this case</li>
<li><code>type</code> the type of this test, this must be an excellent test (see below) and will be passed the value of the switch’s operand as its first value</li>
<li><code>arguments</code> an optional list of templates which can be passed as extra parameters to the test (after the initial operand)</li>
<li><code>exit_uuid</code> the uuid of the exit that should be taken if this case evaluated to true</li>
</ul>
<p>An example switch router that tests for the input not being empty:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">&quot;router&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;switch&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">        <span class="dt">&quot;operand&quot;</span><span class="fu">:</span> <span class="st">&quot;@run.input&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        <span class="dt">&quot;default_exit_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;9574fbfd-510f-4dfc-b989-97d2aecf50b9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">        <span class="dt">&quot;cases&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;6f78d564-029b-4715-b8d4-b28daeae4f24&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">            <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;has_text&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">            <span class="dt">&quot;exit_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;cab600f5-b54b-49b9-a7ea-5638f4cbf2b4&quot;</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">        <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13">    <span class="dt">&quot;exits&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;cab600f5-b54b-49b9-a7ea-5638f4cbf2b4&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;Has Name&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;deec1dd4-b727-4b21-800a-0b7bbd146a82&quot;</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">    <span class="fu">}</span><span class="ot">,</span><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span><span class="st">&quot;9574fbfd-510f-4dfc-b989-97d2aecf50b9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;Other&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20">        <span class="dt">&quot;destination_node_uuid&quot;</span><span class="fu">:</span><span class="st">&quot;ee0bee3f-34b3-4275-af78-f9ff52c82e6a&quot;</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21">    <span class="fu">}</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="fu">}</span></a></code></pre></div>
<h1 id="waits">Waits</h1>
<p>A node can indicate that it needs more information to continue by containing a wait.</p>
<h2 id="msg">Msg</h2>
<p>This wait type indicates that flow execution should pause until an incoming message is received and also gives an optional timeout in seconds as to when the flow should continue even if there is no reply:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">&quot;timeout&quot;</span><span class="fu">:</span> <span class="dv">600</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
<h2 id="nothing">Nothing</h2>
<p>This wait type indicates that the caller can resume the session immediately with no incoming message or any other input. This type of wait enables the caller to commit changes in the session up to that point in the flow.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;nothing&quot;</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="fu">}</span></a></code></pre></div>
<h1 id="context">Context</h1>
<p>Flows do not describe data flow but rather actions and logic branching. As such, variables collected in a flow and the state of the flow are accessed through what is called the context. The context contains variables representing the current contact in a flow, the last input from that contact as well as the results collected in a flow and any webhook requests made during the flow. Variables in the context may be referred to within actions by using the <code>@</code> symbol. For example, to greet a contact by their name in a <a href="#action:send_msg">send_msg</a> action, the text of the action can be <code>Hi @contact.name!</code>.</p>
<p>The <code>@</code> symbol can be escaped in templates by repeating it, ie, <code>Hi @@twitter</code> would output <code>Hi @twitter</code>.</p>
<p>The context contains the following top-level variables:</p>
<ul>
<li><code>contact</code> the <a href="#context:contact">contact</a> of the current flow run</li>
<li><code>run</code> the current <a href="#context:run">run</a></li>
<li><code>parent</code> the parent of the current <a href="#context:run">run</a>, i.e. the run that started the current run</li>
<li><code>child</code> the child of the current <a href="#context:run">run</a>, i.e. the last subflow</li>
<li><code>trigger</code> the <a href="#context:trigger">trigger</a> that initiated this session</li>
</ul>
<p>The following types appear in the context:</p>
<ul>
<li><a href="#context:channel">Channel</a></li>
<li><a href="#context:contact">Contact</a></li>
<li><a href="#context:flow">Flow</a></li>
<li><a href="#context:group">Group</a></li>
<li><a href="#context:input">Input</a></li>
<li><a href="#context:result">Result</a></li>
<li><a href="#context:run">Run</a></li>
<li><a href="#context:trigger">Trigger</a></li>
<li><a href="#context:urn">URN</a></li>
<li><a href="#context:webhook">Webhook</a></li>
</ul>
<div class="context">
<p><a name="context:attachment"></a></p>
<h2 id="attachment">Attachment</h2>
<p>Is a media attachment on a message, and it has the following properties which can be accessed:</p>
<ul>
<li><code>content_type</code> the MIME type of the attachment</li>
<li><code>url</code> the URL of the attachment</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb7-1" data-line-number="1">@run.input.attachments.<span class="fl">0.</span>content_type → image/jpeg</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">@run.input.attachments.<span class="fl">0.</span>url → http:<span class="co">//s3.amazon.com/bucket/test.jpg</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">@(json(run.input.attachments<span class="fl">.0</span>)) → {<span class="st">&quot;content_type&quot;</span>:<span class="st">&quot;image/jpeg&quot;</span>,<span class="st">&quot;url&quot;</span>:<span class="st">&quot;http://s3.amazon.com/bucket/test.jpg&quot;</span>}</a></code></pre></div>
<p><a name="context:channel"></a></p>
<h2 id="channel">Channel</h2>
<p>Represents a means for sending and receiving input during a flow run. It renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the channel</li>
<li><code>name</code> the name of the channel</li>
<li><code>address</code> the address of the channel</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb8-1" data-line-number="1">@contact.channel → My Android Phone</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">@contact.channel.name → My Android Phone</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">@contact.channel.address → +<span class="dv">12345671111</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">@run.input.channel.uuid → 57f1078f-88aa-46f4-a59a-948a5739c03d</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">@(json(contact.channel)) → {<span class="st">&quot;address&quot;</span>:<span class="st">&quot;+12345671111&quot;</span>,<span class="st">&quot;name&quot;</span>:<span class="st">&quot;My Android Phone&quot;</span>,<span class="st">&quot;uuid&quot;</span>:<span class="st">&quot;57f1078f-88aa-46f4-a59a-948a5739c03d&quot;</span>}</a></code></pre></div>
<p><a name="context:contact"></a></p>
<h2 id="contact">Contact</h2>
<p>Represents a person who is interacting with the flow. It renders as the person’s name (or perferred URN if name isn’t set) in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the contact</li>
<li><code>name</code> the full name of the contact</li>
<li><code>first_name</code> the first name of the contact</li>
<li><code>language</code> the <a href="http://www-01.sil.org/iso639-3/">ISO-639-3</a> language code of the contact</li>
<li><code>timezone</code> the timezone name of the contact</li>
<li><code>created_on</code> the datetime when the contact was created</li>
<li><code>urns</code> all <a href="#context:urn">URNs</a> the contact has set</li>
<li><code>urns.[scheme]</code> all the <a href="#context:urn">URNs</a> the contact has set for the particular URN scheme</li>
<li><code>urn</code> shorthand for <code>@(format_urn(c.urns.0))</code>, i.e. the contact’s preferred <a href="#context:urn">URN</a> in friendly formatting</li>
<li><code>groups</code> all the <a href="#context:group">groups</a> that the contact belongs to</li>
<li><code>fields</code> all the custom contact fields the contact has set</li>
<li><code>fields.[snaked_field_name]</code> the value of the specific field</li>
<li><code>channel</code> shorthand for <code>contact.urns.0.channel</code>, i.e. the <a href="#context:channel">channel</a> of the contact’s preferred URN</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb9-1" data-line-number="1">@contact → Ryan Lewis</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">@contact.name → Ryan Lewis</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">@contact.first_name → Ryan</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">@contact.language → eng</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">@contact.timezone → America/Guayaquil</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">@contact.created_on → <span class="dv">2018-06</span>-20T11:<span class="dv">40</span>:<span class="fl">30.123456</span>Z</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">@contact.urns → [<span class="st">&quot;tel:+12065551212&quot;</span>,<span class="st">&quot;twitterid:54784326227#nyaruka&quot;</span>,<span class="st">&quot;mailto:foo@bar.com&quot;</span>]</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">@contact.urns<span class="fl">.0</span> → tel:+<span class="dv">12065551212</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">@contact.urns.tel → [<span class="st">&quot;tel:+12065551212&quot;</span>]</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">@contact.urns.mailto<span class="fl">.0</span> → mailto:foo@bar.com</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">@contact.urn → (<span class="dv">206</span>) <span class="dv">555-1212</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">@contact.groups → [<span class="st">&quot;Testers&quot;</span>,<span class="st">&quot;Males&quot;</span>]</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">@contact.fields → {<span class="st">&quot;activation_token&quot;</span>:<span class="st">&quot;AACC55&quot;</span>,<span class="st">&quot;age&quot;</span>:<span class="st">&quot;23&quot;</span>,<span class="st">&quot;gender&quot;</span>:<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;join_date&quot;</span>:<span class="st">&quot;2017-12-02T00:00:00.000000-02:00&quot;</span>}</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">@contact.fields.activation_token → AACC55</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">@contact.fields.gender → Male</a></code></pre></div>
<p><a name="context:flow"></a></p>
<h2 id="flow">Flow</h2>
<p>Describes the ordered logic of actions and routers. It renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the flow</li>
<li><code>name</code> the name of the flow</li>
<li><code>revision</code> the revision number of the flow</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb10-1" data-line-number="1">@run.flow → Registration</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">@child.flow → Collect Age</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">@run.flow.uuid → 50c3706e-fedb-42c0-8eab-dda3335714b7</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">@(json(run.flow)) → {<span class="st">&quot;name&quot;</span>:<span class="st">&quot;Registration&quot;</span>,<span class="st">&quot;revision&quot;</span>:<span class="dv">123</span>,<span class="st">&quot;uuid&quot;</span>:<span class="st">&quot;50c3706e-fedb-42c0-8eab-dda3335714b7&quot;</span>}</a></code></pre></div>
<p><a name="context:group"></a></p>
<h2 id="group">Group</h2>
<p>Represents a grouping of contacts. It can be static (contacts are added and removed manually through <a href="#action:add_contact_groups">actions</a>) or dynamic (contacts are added automatically by a query). It renders as its name in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the group</li>
<li><code>name</code> the name of the group</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb11-1" data-line-number="1">@contact.groups → [<span class="st">&quot;Testers&quot;</span>,<span class="st">&quot;Males&quot;</span>]</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">@contact.groups.<span class="fl">0.</span>uuid → b7cf0d83-f1c9-411c-96fd-c511a4cfa86d</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">@contact.groups.<span class="fl">1.</span>name → Males</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">@(json(contact.groups<span class="fl">.1</span>)) → {<span class="st">&quot;name&quot;</span>:<span class="st">&quot;Males&quot;</span>,<span class="st">&quot;uuid&quot;</span>:<span class="st">&quot;4f1f98fc-27a7-4a69-bbdb-24744ba739a9&quot;</span>}</a></code></pre></div>
<p><a name="context:input"></a></p>
<h2 id="input">Input</h2>
<p>Describes input from the contact and currently we only support one type of input: <code>msg</code>. Any input has the following properties which can be accessed:</p>
<ul>
<li><code>uuid</code> the UUID of the input</li>
<li><code>type</code> the type of the input, e.g. <code>msg</code></li>
<li><code>channel</code> the <a href="#context:channel">channel</a> that the input was received on</li>
<li><code>created_on</code> the time when the input was created</li>
</ul>
<p>An input of type <code>msg</code> renders as its text and attachments in a template, and has the following additional properties:</p>
<ul>
<li><code>text</code> the text of the message</li>
<li><code>attachments</code> any <a href="#context:attachment">attachments</a> on the message</li>
<li><code>urn</code> the <a href="#context:urn">URN</a> that the input was received on</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb12-1" data-line-number="1">@run.input → Hi there\nhttp:<span class="co">//s3.amazon.com/bucket/test.jpg\nhttp://s3.amazon.com/bucket/test.mp3</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">@run.input.type → msg</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">@run.input.text → Hi there</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">@run.input.attachments → [<span class="st">&quot;http://s3.amazon.com/bucket/test.jpg&quot;</span>,<span class="st">&quot;http://s3.amazon.com/bucket/test.mp3&quot;</span>]</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">@(json(run.input)) → {<span class="st">&quot;attachments&quot;</span>:[{<span class="st">&quot;content_type&quot;</span>:<span class="st">&quot;image/jpeg&quot;</span>,<span class="st">&quot;url&quot;</span>:<span class="st">&quot;http://s3.amazon.com/bucket/test.jpg&quot;</span>},{<span class="st">&quot;content_type&quot;</span>:<span class="st">&quot;audio/mp3&quot;</span>,<span class="st">&quot;url&quot;</span>:<span class="st">&quot;http://s3.amazon.com/bucket/test.mp3&quot;</span>}],<span class="st">&quot;channel&quot;</span>:{<span class="st">&quot;address&quot;</span>:<span class="st">&quot;+12345671111&quot;</span>,<span class="st">&quot;name&quot;</span>:<span class="st">&quot;My Android Phone&quot;</span>,<span class="st">&quot;uuid&quot;</span>:<span class="st">&quot;57f1078f-88aa-46f4-a59a-948a5739c03d&quot;</span>},<span class="st">&quot;created_on&quot;</span>:<span class="st">&quot;2000-01-01T00:00:00.000000Z&quot;</span>,<span class="st">&quot;text&quot;</span>:<span class="st">&quot;Hi there&quot;</span>,<span class="st">&quot;type&quot;</span>:<span class="st">&quot;msg&quot;</span>,<span class="st">&quot;urn&quot;</span>:{<span class="st">&quot;display&quot;</span>:<span class="st">&quot;&quot;</span>,<span class="st">&quot;path&quot;</span>:<span class="st">&quot;+12065551212&quot;</span>,<span class="st">&quot;scheme&quot;</span>:<span class="st">&quot;tel&quot;</span>},<span class="st">&quot;uuid&quot;</span>:<span class="st">&quot;9bf91c2b-ce58-4cef-aacc-281e03f69ab5&quot;</span>}</a></code></pre></div>
<p><a name="context:result"></a></p>
<h2 id="result">Result</h2>
<p>Describes a value captured during a run’s execution. It might have been implicitly created by a router, or explicitly created by a <a href="#action:set_run_result">set_run_result</a> action.It renders as its value in a template, and has the following properties which can be accessed:</p>
<ul>
<li><code>value</code> the value of the result</li>
<li><code>category</code> the category of the result</li>
<li><code>category_localized</code> the localized category of the result</li>
<li><code>input</code> the input associated with the result</li>
<li><code>node_uuid</code> the UUID of the node where the result was created</li>
<li><code>created_on</code> the time when the result was created</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb13-1" data-line-number="1">@run.results.favorite_color → red</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">@run.results.favorite_color.value → red</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">@run.results.favorite_color.category → Red</a></code></pre></div>
<p><a name="context:run"></a></p>
<h2 id="run">Run</h2>
<p>Is a single contact’s journey through a flow. It records the path they have taken, and the results that have been collected. It has several properties which can be accessed in expressions:</p>
<ul>
<li><code>uuid</code> the UUID of the run</li>
<li><code>flow</code> the <a href="#context:flow">flow</a> of the run</li>
<li><code>contact</code> the <a href="#context:contact">contact</a> of the flow run</li>
<li><code>input</code> the <a href="#context:input">input</a> of the current run</li>
<li><code>results</code> the results that have been saved for this run</li>
<li><code>results.[snaked_result_name]</code> the value of the specific result, e.g. <code>run.results.age</code></li>
<li><code>webhook</code> the last <a href="#context:webhook">webhook</a> call made in the current run</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb14-1" data-line-number="1">@run.flow.name → Registration</a></code></pre></div>
<p><a name="context:trigger"></a></p>
<h2 id="trigger">Trigger</h2>
<p>Represents something which can initiate a session with the flow engine. It has several properties which can be accessed in expressions:</p>
<ul>
<li><code>type</code> the type of the trigger, one of “manual” or “flow”</li>
<li><code>params</code> the parameters passed to the trigger</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb15-1" data-line-number="1">@trigger.type → flow_action</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">@trigger.params → {<span class="st">&quot;source&quot;</span>: <span class="st">&quot;website&quot;</span>,<span class="st">&quot;address&quot;</span>: {<span class="st">&quot;state&quot;</span>: <span class="st">&quot;WA&quot;</span>}}</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">@(json(trigger)) → {<span class="st">&quot;params&quot;</span>:{<span class="st">&quot;source&quot;</span>:<span class="st">&quot;website&quot;</span>,<span class="st">&quot;address&quot;</span>:{<span class="st">&quot;state&quot;</span>:<span class="st">&quot;WA&quot;</span>}},<span class="st">&quot;type&quot;</span>:<span class="st">&quot;flow_action&quot;</span>}</a></code></pre></div>
<p><a name="context:urn"></a></p>
<h2 id="urn">Urn</h2>
<p>Represents a destination for an outgoing message or a source of an incoming message. It is string composed of 3 components: scheme, path, and display (optional). For example:</p>
<ul>
<li><em>tel:+16303524567</em></li>
<li><em>twitterid:54784326227#nyaruka</em></li>
<li><em>telegram:34642632786#bobby</em></li>
</ul>
<p>It has several properties which can be accessed in expressions:</p>
<ul>
<li><code>scheme</code> the scheme of the URN, e.g. “tel”, “twitter”</li>
<li><code>path</code> the path of the URN, e.g. “+16303524567”</li>
<li><code>display</code> the display portion of the URN, e.g. “+16303524567”</li>
<li><code>channel</code> the preferred <a href="#context:channel">channel</a> of the URN</li>
</ul>
<p>To render a URN in a human friendly format, use the <a href="#function:format_urn">format_urn</a> function.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb16-1" data-line-number="1">@contact.urns<span class="fl">.0</span> → tel:+<span class="dv">12065551212</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">@contact.urns.<span class="fl">0.</span>scheme → tel</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">@contact.urns.<span class="fl">0.</span>path → +<span class="dv">12065551212</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">@contact.urns.<span class="fl">1.</span>display → nyaruka</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">@(format_urn(contact.urns<span class="fl">.0</span>)) → (<span class="dv">206</span>) <span class="dv">555-1212</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">@(json(contact.urns<span class="fl">.0</span>)) → {<span class="st">&quot;display&quot;</span>:<span class="st">&quot;&quot;</span>,<span class="st">&quot;path&quot;</span>:<span class="st">&quot;+12065551212&quot;</span>,<span class="st">&quot;scheme&quot;</span>:<span class="st">&quot;tel&quot;</span>}</a></code></pre></div>
<p><a name="context:webhook"></a></p>
<h2 id="webhook">Webhook</h2>
<p>Describes a call made to an external service. It has several properties which can be accessed in expressions:</p>
<ul>
<li><code>status</code> the status of the webhook - one of “success”, “connection_error” or “response_error”</li>
<li><code>status_code</code> the status code of the response</li>
<li><code>body</code> the body of the response</li>
<li><code>json</code> the parsed JSON response (if response body was JSON)</li>
<li><code>json.[key]</code> sub-elements of the parsed JSON response</li>
<li><code>request</code> the raw request made, including headers</li>
<li><code>response</code> the raw response received, including headers</li>
</ul>
<p>Examples:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb17-1" data-line-number="1">@run.webhook.status_code → <span class="dv">200</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">@run.webhook.json.results.<span class="fl">0.</span>state → WA</a></code></pre></div>
</div>
<h1 id="template-functions">Template Functions</h1>
<p>In addition to simple substitutions, flows also have access to a set of functions which can be used in templates to further manipulate the context. Functions are called using the <code>@(function_name(args..))</code> syntax. For example, to title case a contact’s name in a message, you can use <code>@(title(contact.name))</code>. Context variables referred to within functions do not need a leading <code>@</code>. Functions can also use literal numbers or strings as arguments, for example <code>@(length(split(&quot;1 2 3&quot;, &quot; &quot;))</code>.</p>
<div class="functions">
<p><a name="function:abs"></a></p>
<h2 id="absnum">abs(num)</h2>
<p>Returns the absolute value of <code>num</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb18-1" data-line-number="1">@(abs(-<span class="dv">10</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">@(abs(<span class="fl">10.5</span>)) → <span class="fl">10.5</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">@(abs(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:and"></a></p>
<h2 id="andtests">and(tests…)</h2>
<p>Returns whether all the passed in arguments are truthy</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb19-1" data-line-number="1">@(and(true)) → true</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">@(and(true, false, true)) → false</a></code></pre></div>
<p><a name="function:array"></a></p>
<h2 id="arrayvalues">array(values…)</h2>
<p>Takes a list of <code>values</code> and returns them as an array</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb20-1" data-line-number="1">@(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="dv">356</span>)[<span class="dv">1</span>]) → b</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">@(join(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="st">&quot;|&quot;</span>)) → a|b|c</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">@(length(array())) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4">@(length(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))) → <span class="dv">2</span></a></code></pre></div>
<p><a name="function:boolean"></a></p>
<h2 id="booleanvalue">boolean(value)</h2>
<p>Tries to convert <code>value</code> to a boolean. An error is returned if the value can’t be converted.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb21-1" data-line-number="1">@(boolean(array(<span class="dv">1</span>, <span class="dv">2</span>))) → true</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">@(boolean(<span class="st">&quot;FALSE&quot;</span>)) → false</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">@(boolean(<span class="dv">1</span> / <span class="dv">0</span>)) → ERROR</a></code></pre></div>
<p><a name="function:char"></a></p>
<h2 id="charnum">char(num)</h2>
<p>Returns the rune for the passed in codepoint, <code>num</code>, which may be unicode, this is the reverse of code</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb22-1" data-line-number="1">@(<span class="dt">char</span>(<span class="dv">33</span>)) → !</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">@(<span class="dt">char</span>(<span class="dv">128512</span>)) → 😀</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">@(<span class="dt">char</span>(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:clean"></a></p>
<h2 id="cleantext">clean(text)</h2>
<p>Strips any non-printable characters from <code>text</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb23-1" data-line-number="1">@(clean(<span class="st">&quot;😃 Hello </span><span class="sc">\n</span><span class="st">wo</span><span class="sc">\t</span><span class="st">r</span><span class="sc">\r</span><span class="st">ld&quot;</span>)) → 😃 Hello world</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">@(clean(<span class="dv">123</span>)) → <span class="dv">123</span></a></code></pre></div>
<p><a name="function:code"></a></p>
<h2 id="codetext">code(text)</h2>
<p>Returns the numeric code for the first character in <code>text</code>, it is the inverse of char</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb24-1" data-line-number="1">@(code(<span class="st">&quot;a&quot;</span>)) → <span class="dv">97</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">@(code(<span class="st">&quot;abc&quot;</span>)) → <span class="dv">97</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3">@(code(<span class="st">&quot;😀&quot;</span>)) → <span class="dv">128512</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4">@(code(<span class="st">&quot;15&quot;</span>)) → <span class="dv">49</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">@(code(<span class="dv">15</span>)) → <span class="dv">49</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6">@(code(<span class="st">&quot;&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:datetime"></a></p>
<h2 id="datetimetext">datetime(text)</h2>
<p>Turns <code>text</code> into a date according to the environment’s settings. It will return an error if it is unable to convert the text to a date.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb25-1" data-line-number="1">@(datetime(<span class="st">&quot;1979-07-18&quot;</span>)) → <span class="dv">1979-07</span>-18T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2">@(datetime(<span class="st">&quot;1979-07-18T10:30:45.123456Z&quot;</span>)) → <span class="dv">1979-07</span>-18T10:<span class="dv">30</span>:<span class="fl">45.123456</span>Z</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">@(datetime(<span class="st">&quot;2010 05 10&quot;</span>)) → <span class="dv">2010-05</span>-10T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4">@(datetime(<span class="st">&quot;NOT DATE&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:datetime_add"></a></p>
<h2 id="datetime_adddate-offset-unit">datetime_add(date, offset, unit)</h2>
<p>Calculates the date value arrived at by adding <code>offset</code> number of <code>unit</code> to the <code>date</code></p>
<p>Valid durations are “Y” for years, “M” for months, “W” for weeks, “D” for days, “h” for hour, “m” for minutes, “s” for seconds</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb26-1" data-line-number="1">@(datetime_add(<span class="st">&quot;2017-01-15&quot;</span>, <span class="dv">5</span>, <span class="st">&quot;D&quot;</span>)) → <span class="dv">2017-01</span>-20T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">@(datetime_add(<span class="st">&quot;2017-01-15 10:45&quot;</span>, <span class="dv">30</span>, <span class="st">&quot;m&quot;</span>)) → <span class="dv">2017-01</span>-15T11:<span class="dv">15</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a></code></pre></div>
<p><a name="function:datetime_diff"></a></p>
<h2 id="datetime_diffdate1-date2-unit">datetime_diff(date1, date2, unit)</h2>
<p>Returns the integer duration between <code>date1</code> and <code>date2</code> in the <code>unit</code> specified.</p>
<p>Valid durations are “Y” for years, “M” for months, “W” for weeks, “D” for days, “h” for hour, “m” for minutes, “s” for seconds</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb27-1" data-line-number="1">@(datetime_diff(<span class="st">&quot;2017-01-17&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>, <span class="st">&quot;D&quot;</span>)) → <span class="dv">2</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">@(datetime_diff(<span class="st">&quot;2017-01-17 10:50&quot;</span>, <span class="st">&quot;2017-01-17 12:30&quot;</span>, <span class="st">&quot;h&quot;</span>)) → <span class="dv">-1</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">@(datetime_diff(<span class="st">&quot;2017-01-17&quot;</span>, <span class="st">&quot;2015-12-17&quot;</span>, <span class="st">&quot;Y&quot;</span>)) → <span class="dv">2</span></a></code></pre></div>
<p><a name="function:datetime_from_parts"></a></p>
<h2 id="datetime_from_partsyear-month-day">datetime_from_parts(year, month, day)</h2>
<p>Converts the passed in <code>year</code>, <code>month</code> and <code>day</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb28-1" data-line-number="1">@(datetime_from_parts(<span class="dv">2017</span>, <span class="dv">1</span>, <span class="dv">15</span>)) → <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">@(datetime_from_parts(<span class="dv">2017</span>, <span class="dv">2</span>, <span class="dv">31</span>)) → <span class="dv">2017-03</span>-03T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3">@(datetime_from_parts(<span class="dv">2017</span>, <span class="dv">13</span>, <span class="dv">15</span>)) → ERROR</a></code></pre></div>
<p><a name="function:default"></a></p>
<h2 id="defaulttest-default">default(test, default)</h2>
<p>Takes two arguments, returning <code>test</code> if not an error or nil or empty text, otherwise returning <code>default</code></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb29-1" data-line-number="1">@(<span class="kw">default</span>(undeclared.var, <span class="st">&quot;default_value&quot;</span>)) → default_value</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">@(<span class="kw">default</span>(<span class="st">&quot;10&quot;</span>, <span class="st">&quot;20&quot;</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3">@(<span class="kw">default</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;value&quot;</span>)) → value</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">@(<span class="kw">default</span>(array(<span class="dv">1</span>, <span class="dv">2</span>), <span class="st">&quot;value&quot;</span>)) → [<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>]</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">@(<span class="kw">default</span>(array(), <span class="st">&quot;value&quot;</span>)) → value</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">@(<span class="kw">default</span>(datetime(<span class="st">&quot;invalid-date&quot;</span>), <span class="st">&quot;today&quot;</span>)) → today</a></code></pre></div>
<p><a name="function:field"></a></p>
<h2 id="fieldtext-offset-delimiter">field(text, offset, delimiter)</h2>
<p>Splits <code>text</code> based on the passed in <code>delimiter</code> and returns the field at <code>offset</code>. When splitting with a space, the delimiter is considered to be all whitespace. (first field is 0)</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb30-1" data-line-number="1">@(field(<span class="st">&quot;a,b,c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;,&quot;</span>)) → b</a>
<a class="sourceLine" id="cb30-2" data-line-number="2">@(field(<span class="st">&quot;a,,b,c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;,&quot;</span>)) →</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">@(field(<span class="st">&quot;a   b c&quot;</span>, <span class="dv">1</span>, <span class="st">&quot; &quot;</span>)) → b</a>
<a class="sourceLine" id="cb30-4" data-line-number="4">@(field(<span class="st">&quot;a      b   c   d&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;    &quot;</span>)) →</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">@(field(<span class="st">&quot;a</span><span class="sc">\t\t</span><span class="st">b</span><span class="sc">\t</span><span class="st">c</span><span class="sc">\t</span><span class="st">d&quot;</span>, <span class="dv">1</span>, <span class="st">&quot; &quot;</span>)) →</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">@(field(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;,&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:format_date"></a></p>
<h2 id="format_datedate-format">format_date(date, [,format])</h2>
<p>Turns <code>date</code> into text according to the <code>format</code> specified.</p>
<p>The format string can consist of the following characters. The characters ’ ‘,’:‘,’,‘, ’T’, ‘-’ and ’_’ are ignored. Any other character is an error.</p>
<ul>
<li><code>YY</code> - last two digits of year 0-99</li>
<li><code>YYYY</code> - four digits of your 0000-9999</li>
<li><code>M</code> - month 1-12</li>
<li><code>MM</code> - month 01-12</li>
<li><code>D</code> - day of month, 1-31</li>
<li><code>DD</code> - day of month, zero padded 0-31</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb31-1" data-line-number="1">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>)) → <span class="dv">1979-07-18</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → <span class="dv">1979-07-18</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3">@(format_date(<span class="st">&quot;2010-05-10T19:50:00.000000Z&quot;</span>, <span class="st">&quot;YYYY M DD&quot;</span>)) → <span class="dv">2010</span> <span class="dv">5</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;YYYY&quot;</span>)) → <span class="dv">1979</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">@(format_date(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;M&quot;</span>)) → <span class="dv">7</span></a>
<a class="sourceLine" id="cb31-6" data-line-number="6">@(format_date(<span class="st">&quot;NOT DATE&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:format_datetime"></a></p>
<h2 id="format_datetimedate-format-timezone">format_datetime(date [,format [,timezone]])</h2>
<p>Turns <code>date</code> into text according to the <code>format</code> specified and in the optional <code>timezone</code>.</p>
<p>The format string can consist of the following characters. The characters ’ ‘,’:‘,’,‘, ’T’, ‘-’ and ’_’ are ignored. Any other character is an error.</p>
<ul>
<li><code>YY</code> - last two digits of year 0-99</li>
<li><code>YYYY</code> - four digits of your 0000-9999</li>
<li><code>M</code> - month 1-12</li>
<li><code>MM</code> - month 01-12</li>
<li><code>D</code> - day of month, 1-31</li>
<li><code>DD</code> - day of month, zero padded 0-31</li>
<li><code>h</code> - hour of the day 1-12</li>
<li><code>hh</code> - hour of the day 01-12</li>
<li><code>tt</code> - twenty four hour of the day 01-23</li>
<li><code>m</code> - minute 0-59</li>
<li><code>mm</code> - minute 00-59</li>
<li><code>s</code> - second 0-59</li>
<li><code>ss</code> - second 00-59</li>
<li><code>fff</code> - milliseconds</li>
<li><code>ffffff</code> - microseconds</li>
<li><code>fffffffff</code> - nanoseconds</li>
<li><code>aa</code> - am or pm</li>
<li><code>AA</code> - AM or PM</li>
<li><code>Z</code> - hour and minute offset from UTC, or Z for UTC</li>
<li><code>ZZZ</code> - hour and minute offset from UTC</li>
</ul>
<p>Timezone should be a location name as specified in the IANA Time Zone database, such as “America/Guayaquil” or “America/Los_Angeles”. If not specified the timezone of your environment will be used. An error will be returned if the timezone is not recognized.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb32-1" data-line-number="1">@(format_datetime(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>)) → <span class="dv">1979-07-18</span> <span class="dv">10</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2">@(format_datetime(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → <span class="dv">1979-07-18</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3">@(format_datetime(<span class="st">&quot;2010-05-10T19:50:00.000000Z&quot;</span>, <span class="st">&quot;YYYY M DD tt:mm&quot;</span>)) → <span class="dv">2010</span> <span class="dv">5</span> <span class="dv">10</span> <span class="dv">14</span>:<span class="dv">50</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4">@(format_datetime(<span class="st">&quot;2010-05-10T19:50:00.000000Z&quot;</span>, <span class="st">&quot;YYYY-MM-DD tt:mm AA&quot;</span>, <span class="st">&quot;America/Los_Angeles&quot;</span>)) → <span class="dv">2010-05-10</span> <span class="dv">12</span>:<span class="dv">50</span> PM</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">@(format_datetime(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;YYYY&quot;</span>)) → <span class="dv">1979</span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6">@(format_datetime(<span class="st">&quot;1979-07-18T15:00:00.000000Z&quot;</span>, <span class="st">&quot;M&quot;</span>)) → <span class="dv">7</span></a>
<a class="sourceLine" id="cb32-7" data-line-number="7">@(format_datetime(<span class="st">&quot;NOT DATE&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:format_location"></a></p>
<h2 id="format_locationlocation">format_location(location)</h2>
<p>Formats the given location as its name</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb33-1" data-line-number="1">@(format_location(<span class="st">&quot;Rwanda&quot;</span>)) → Rwanda</a>
<a class="sourceLine" id="cb33-2" data-line-number="2">@(format_location(<span class="st">&quot;Rwanda &gt; Kigali&quot;</span>)) → Kigali</a></code></pre></div>
<p><a name="function:format_number"></a></p>
<h2 id="format_numbernum-places-commas">format_number(num, places, commas)</h2>
<p>Returns <code>num</code> formatted with the passed in number of decimal <code>places</code> and optional <code>commas</code> dividing thousands separators</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb34-1" data-line-number="1">@(format_number(<span class="dv">31337</span>)) → <span class="dv">31</span>,<span class="fl">337.00</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">@(format_number(<span class="dv">31337</span>, <span class="dv">2</span>)) → <span class="dv">31</span>,<span class="fl">337.00</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">@(format_number(<span class="dv">31337</span>, <span class="dv">2</span>, true)) → <span class="dv">31</span>,<span class="fl">337.00</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4">@(format_number(<span class="dv">31337</span>, <span class="dv">0</span>, false)) → <span class="dv">31337</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5">@(format_number(<span class="st">&quot;foo&quot;</span>, <span class="dv">2</span>, false)) → ERROR</a></code></pre></div>
<p><a name="function:format_urn"></a></p>
<h2 id="format_urnurn">format_urn(urn)</h2>
<p>Turns <code>urn</code> into human friendly text</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb35-1" data-line-number="1">@(format_urn(<span class="st">&quot;tel:+250781234567&quot;</span>)) → <span class="dv">0781</span> <span class="dv">234</span> <span class="dv">567</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">@(format_urn(<span class="st">&quot;twitter:134252511151#billy_bob&quot;</span>)) → billy_bob</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">@(format_urn(contact.urns)) → (<span class="dv">206</span>) <span class="dv">555-1212</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">@(format_urn(contact.urns<span class="fl">.2</span>)) → foo@bar.com</a>
<a class="sourceLine" id="cb35-5" data-line-number="5">@(format_urn(contact.urns.mailto)) → foo@bar.com</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">@(format_urn(contact.urns.mailto<span class="fl">.0</span>)) → foo@bar.com</a>
<a class="sourceLine" id="cb35-7" data-line-number="7">@(format_urn(contact.urns.telegram)) →</a>
<a class="sourceLine" id="cb35-8" data-line-number="8">@(format_urn(<span class="st">&quot;NOT URN&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:from_epoch"></a></p>
<h2 id="from_epochnum">from_epoch(num)</h2>
<p>Returns a new date created from <code>num</code> which represents number of nanoseconds since January 1st, 1970 GMT</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb36-1" data-line-number="1">@(from_epoch(<span class="dv">1497286619000000000</span>)) → <span class="dv">2017-06</span>-12T11:<span class="dv">56</span>:<span class="fl">59.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a></code></pre></div>
<p><a name="function:if"></a></p>
<h2 id="iftest-true_value-false_value">if(test, true_value, false_value)</h2>
<p>Evaluates the <code>test</code> argument, and if truthy returns <code>true_value</code>, if not returning <code>false_value</code></p>
<p>If the first argument is an error that error is returned</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb37-1" data-line-number="1">@(<span class="kw">if</span>(<span class="dv">1</span> = <span class="dv">1</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) → foo</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">@(<span class="kw">if</span>(<span class="st">&quot;foo&quot;</span> &gt; <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:join"></a></p>
<h2 id="joinarray-delimiter">join(array, delimiter)</h2>
<p>Joins the passed in <code>array</code> of strings with the passed in <code>delimiter</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb38-1" data-line-number="1">@(join(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), <span class="st">&quot;|&quot;</span>)) → a|b|c</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">@(join(split(<span class="st">&quot;a.b.c&quot;</span>, <span class="st">&quot;.&quot;</span>), <span class="st">&quot; &quot;</span>)) → a b c</a></code></pre></div>
<p><a name="function:json"></a></p>
<h2 id="jsonvalue">json(value)</h2>
<p>Tries to return a JSON representation of <code>value</code>. An error is returned if there is no JSON representation of that object.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb39-1" data-line-number="1">@(json(<span class="st">&quot;string&quot;</span>)) → <span class="st">&quot;string&quot;</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">@(json(<span class="dv">10</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3">@(json(contact.uuid)) → <span class="st">&quot;5d76d86b-3bb9-4d5a-b822-c9d86f5d8e4f&quot;</span></a></code></pre></div>
<p><a name="function:left"></a></p>
<h2 id="lefttext-count">left(text, count)</h2>
<p>Returns the <code>count</code> most left characters of the passed in <code>text</code></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb40-1" data-line-number="1">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">2</span>)) → he</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">7</span>)) → hello</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">@(left(<span class="st">&quot;😀😃😄😁&quot;</span>, <span class="dv">2</span>)) → 😀😃</a>
<a class="sourceLine" id="cb40-4" data-line-number="4">@(left(<span class="st">&quot;hello&quot;</span>, <span class="dv">-1</span>)) → ERROR</a></code></pre></div>
<p><a name="function:length"></a></p>
<h2 id="lengthvalue">length(value)</h2>
<p>Returns the length of the passed in text or array.</p>
<p>length will return an error if it is passed an item which doesn’t have length.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb41-1" data-line-number="1">@(length(<span class="st">&quot;Hello&quot;</span>)) → <span class="dv">5</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2">@(length(<span class="st">&quot;😀😃😄😁&quot;</span>)) → <span class="dv">4</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3">@(length(array())) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4">@(length(array(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))) → <span class="dv">3</span></a>
<a class="sourceLine" id="cb41-5" data-line-number="5">@(length(<span class="dv">1234</span>)) → ERROR</a></code></pre></div>
<p><a name="function:lower"></a></p>
<h2 id="lowertext">lower(text)</h2>
<p>Lowercases the passed in <code>text</code></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb42-1" data-line-number="1">@(lower(<span class="st">&quot;HellO&quot;</span>)) → hello</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">@(lower(<span class="st">&quot;hello&quot;</span>)) → hello</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">@(lower(<span class="st">&quot;123&quot;</span>)) → <span class="dv">123</span></a>
<a class="sourceLine" id="cb42-4" data-line-number="4">@(lower(<span class="st">&quot;😀&quot;</span>)) → 😀</a></code></pre></div>
<p><a name="function:max"></a></p>
<h2 id="maxvalues">max(values…)</h2>
<p>Takes a list of <code>values</code> and returns the greatest of them</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb43-1" data-line-number="1">@(max(<span class="dv">1</span>, <span class="dv">2</span>)) → <span class="dv">2</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2">@(max(<span class="dv">1</span>, <span class="dv">-1</span>, <span class="dv">10</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3">@(max(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:mean"></a></p>
<h2 id="meanvalues">mean(values)</h2>
<p>Takes a list of <code>values</code> and returns the arithmetic mean of them</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb44-1" data-line-number="1">@(mean(<span class="dv">1</span>, <span class="dv">2</span>)) → <span class="fl">1.5</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">@(mean(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)) → <span class="dv">3</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3">@(mean(<span class="dv">1</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:min"></a></p>
<h2 id="minvalues">min(values)</h2>
<p>Takes a list of <code>values</code> and returns the smallest of them</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb45-1" data-line-number="1">@(min(<span class="dv">1</span>, <span class="dv">2</span>)) → <span class="dv">1</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2">@(min(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">-10</span>)) → <span class="dv">-10</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3">@(min(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:mod"></a></p>
<h2 id="moddividend-divisor">mod(dividend, divisor)</h2>
<p>Returns the remainder of the division of <code>divident</code> by <code>divisor</code></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb46-1" data-line-number="1">@(mod(<span class="dv">5</span>, <span class="dv">2</span>)) → <span class="dv">1</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2">@(mod(<span class="dv">4</span>, <span class="dv">2</span>)) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3">@(mod(<span class="dv">5</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:now"></a></p>
<h2 id="now">now()</h2>
<p>Returns the current date and time in the environment timezone</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb47-1" data-line-number="1">@(now()) → <span class="dv">2018-04</span>-11T13:<span class="dv">24</span>:<span class="fl">30.123456</span><span class="dv">-05</span>:<span class="dv">00</span></a></code></pre></div>
<p><a name="function:number"></a></p>
<h2 id="numbervalue">number(value)</h2>
<p>Tries to convert <code>value</code> to a number. An error is returned if the value can’t be converted.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb48-1" data-line-number="1">@(number(<span class="dv">10</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">@(number(<span class="st">&quot;123.45000&quot;</span>)) → <span class="fl">123.45</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3">@(number(<span class="st">&quot;what?&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:or"></a></p>
<h2 id="ortests">or(tests…)</h2>
<p>Returns whether if any of the passed in arguments are truthy</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb49-1" data-line-number="1">@(or(true)) → true</a>
<a class="sourceLine" id="cb49-2" data-line-number="2">@(or(true, false, true)) → true</a></code></pre></div>
<p><a name="function:parse_datetime"></a></p>
<h2 id="parse_datetimetext-format-timezone">parse_datetime(text, format [,timezone])</h2>
<p>Turns <code>text</code> into a date according to the <code>format</code> and optional <code>timezone</code> specified</p>
<p>The format string can consist of the following characters. The characters ’ ‘,’:‘,’,‘, ’T’, ‘-’ and ’_’ are ignored. Any other character is an error.</p>
<ul>
<li><code>YY</code> - last two digits of year 0-99</li>
<li><code>YYYY</code> - four digits of your 0000-9999</li>
<li><code>M</code> - month 1-12</li>
<li><code>MM</code> - month 01-12</li>
<li><code>D</code> - day of month, 1-31</li>
<li><code>DD</code> - day of month, zero padded 0-31</li>
<li><code>h</code> - hour of the day 1-12</li>
<li><code>hh</code> - hour of the day 01-12</li>
<li><code>tt</code> - twenty four hour of the day 01-23</li>
<li><code>m</code> - minute 0-59</li>
<li><code>mm</code> - minute 00-59</li>
<li><code>s</code> - second 0-59</li>
<li><code>ss</code> - second 00-59</li>
<li><code>fff</code> - milliseconds</li>
<li><code>ffffff</code> - microseconds</li>
<li><code>fffffffff</code> - nanoseconds</li>
<li><code>aa</code> - am or pm</li>
<li><code>AA</code> - AM or PM</li>
<li><code>Z</code> - hour and minute offset from UTC, or Z for UTC</li>
<li><code>ZZZ</code> - hour and minute offset from UTC</li>
</ul>
<p>Timezone should be a location name as specified in the IANA Time Zone database, such as “America/Guayaquil” or “America/Los_Angeles”. If not specified the timezone of your environment will be used. An error will be returned if the timezone is not recognized.</p>
<p>Note that fractional seconds will be parsed even without an explicit format identifier. You should only specify fractional seconds when you want to assert the number of places in the input format.</p>
<p>parse_datetime will return an error if it is unable to convert the text to a datetime.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb50-1" data-line-number="1">@(parse_datetime(<span class="st">&quot;1979-07-18&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → <span class="dv">1979-07</span>-18T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2">@(parse_datetime(<span class="st">&quot;2010 5 10&quot;</span>, <span class="st">&quot;YYYY M DD&quot;</span>)) → <span class="dv">2010-05</span>-10T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3">@(parse_datetime(<span class="st">&quot;2010 5 10 12:50&quot;</span>, <span class="st">&quot;YYYY M DD tt:mm&quot;</span>, <span class="st">&quot;America/Los_Angeles&quot;</span>)) → <span class="dv">2010-05</span>-10T12:<span class="dv">50</span>:<span class="fl">00.000000</span><span class="dv">-07</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4">@(parse_datetime(<span class="st">&quot;NOT DATE&quot;</span>, <span class="st">&quot;YYYY-MM-DD&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:parse_json"></a></p>
<h2 id="parse_jsontext">parse_json(text)</h2>
<p>Tries to parse <code>text</code> as JSON, returning a fragment you can index into</p>
<p>If the passed in value is not JSON, then an error is returned</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb51-1" data-line-number="1">@(parse_json(<span class="st">&quot;[1,2,3,4]&quot;</span>).<span class="dv">2</span>) → <span class="dv">3</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2">@(parse_json(<span class="st">&quot;invalid json&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:percent"></a></p>
<h2 id="percentnum">percent(num)</h2>
<p>Converts <code>num</code> to text represented as a percentage</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb52-1" data-line-number="1">@(percent(<span class="fl">0.54234</span>)) → <span class="dv">54</span>%</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">@(percent(<span class="fl">1.2</span>)) → <span class="dv">120</span>%</a>
<a class="sourceLine" id="cb52-3" data-line-number="3">@(percent(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:rand"></a></p>
<h2 id="rand">rand()</h2>
<p>Returns a single random number between [0.0-1.0).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb53-1" data-line-number="1">@(rand()) → <span class="fl">0.3849275689214193274523267973563633859157562255859375</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2">@(rand()) → <span class="fl">0.607552015674623913099594574305228888988494873046875</span></a></code></pre></div>
<p><a name="function:rand_between"></a></p>
<h2 id="rand_between">rand_between()</h2>
<p>A single random integer in the given inclusive range.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb54-1" data-line-number="1">@(rand_between(<span class="dv">1</span>, <span class="dv">10</span>)) → <span class="dv">5</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2">@(rand_between(<span class="dv">1</span>, <span class="dv">10</span>)) → <span class="dv">10</span></a></code></pre></div>
<p><a name="function:read_chars"></a></p>
<h2 id="read_charstext">read_chars(text)</h2>
<p>Converts <code>text</code> into something that can be read by IVR systems</p>
<p>ReadChars will split the numbers such as they are easier to understand. This includes splitting in 3s or 4s if appropriate.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb55-1" data-line-number="1">@(read_chars(<span class="st">&quot;1234&quot;</span>)) → <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2">@(read_chars(<span class="st">&quot;abc&quot;</span>)) → a b c</a>
<a class="sourceLine" id="cb55-3" data-line-number="3">@(read_chars(<span class="st">&quot;abcdef&quot;</span>)) → a b c , d e f</a></code></pre></div>
<p><a name="function:remove_first_word"></a></p>
<h2 id="remove_first_wordtext">remove_first_word(text)</h2>
<p>Removes the 1st word of <code>text</code></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb56-1" data-line-number="1">@(remove_first_word(<span class="st">&quot;foo bar&quot;</span>)) → bar</a></code></pre></div>
<p><a name="function:repeat"></a></p>
<h2 id="repeattext-count">repeat(text, count)</h2>
<p>Return <code>text</code> repeated <code>count</code> number of times</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb57-1" data-line-number="1">@(repeat(<span class="st">&quot;*&quot;</span>, <span class="dv">8</span>)) → ********</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">@(repeat(<span class="st">&quot;*&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:replace"></a></p>
<h2 id="replacetext-needle-replacement">replace(text, needle, replacement)</h2>
<p>Replaces all occurrences of <code>needle</code> with <code>replacement</code> in <code>text</code></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb58-1" data-line-number="1">@(replace(<span class="st">&quot;foo bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;zap&quot;</span>)) → zap bar</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">@(replace(<span class="st">&quot;foo bar&quot;</span>, <span class="st">&quot;baz&quot;</span>, <span class="st">&quot;zap&quot;</span>)) → foo bar</a></code></pre></div>
<p><a name="function:right"></a></p>
<h2 id="righttext-count">right(text, count)</h2>
<p>Returns the <code>count</code> most right characters of the passed in <code>text</code></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb59-1" data-line-number="1">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">2</span>)) → lo</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">7</span>)) → hello</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">@(right(<span class="st">&quot;😀😃😄😁&quot;</span>, <span class="dv">2</span>)) → 😄😁</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">@(right(<span class="st">&quot;hello&quot;</span>, <span class="dv">-1</span>)) → ERROR</a></code></pre></div>
<p><a name="function:round"></a></p>
<h2 id="roundnum-places">round(num [,places])</h2>
<p>Rounds <code>num</code> to the nearest value. You can optionally pass in the number of decimal places to round to as <code>places</code>.</p>
<p>If places &lt; 0, it will round the integer part to the nearest 10^(-places).</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb60-1" data-line-number="1">@(round(<span class="dv">12</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2">@(round(<span class="fl">12.141</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb60-3" data-line-number="3">@(round(<span class="fl">12.6</span>)) → <span class="dv">13</span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4">@(round(<span class="fl">12.141</span>, <span class="dv">2</span>)) → <span class="fl">12.14</span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5">@(round(<span class="fl">12.146</span>, <span class="dv">2</span>)) → <span class="fl">12.15</span></a>
<a class="sourceLine" id="cb60-6" data-line-number="6">@(round(<span class="fl">12.146</span>, <span class="dv">-1</span>)) → <span class="dv">10</span></a>
<a class="sourceLine" id="cb60-7" data-line-number="7">@(round(<span class="st">&quot;notnum&quot;</span>, <span class="dv">2</span>)) → ERROR</a></code></pre></div>
<p><a name="function:round_down"></a></p>
<h2 id="round_downnum-places">round_down(num [,places])</h2>
<p>Rounds <code>num</code> down to the nearest integer value. You can optionally pass in the number of decimal places to round to as <code>places</code>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb61-1" data-line-number="1">@(round_down(<span class="dv">12</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2">@(round_down(<span class="fl">12.141</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3">@(round_down(<span class="fl">12.6</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4">@(round_down(<span class="fl">12.141</span>, <span class="dv">2</span>)) → <span class="fl">12.14</span></a>
<a class="sourceLine" id="cb61-5" data-line-number="5">@(round_down(<span class="fl">12.146</span>, <span class="dv">2</span>)) → <span class="fl">12.14</span></a>
<a class="sourceLine" id="cb61-6" data-line-number="6">@(round_down(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:round_up"></a></p>
<h2 id="round_upnum-places">round_up(num [,places])</h2>
<p>Rounds <code>num</code> up to the nearest integer value. You can optionally pass in the number of decimal places to round to as <code>places</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb62-1" data-line-number="1">@(round_up(<span class="dv">12</span>)) → <span class="dv">12</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">@(round_up(<span class="fl">12.141</span>)) → <span class="dv">13</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">@(round_up(<span class="fl">12.6</span>)) → <span class="dv">13</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4">@(round_up(<span class="fl">12.141</span>, <span class="dv">2</span>)) → <span class="fl">12.15</span></a>
<a class="sourceLine" id="cb62-5" data-line-number="5">@(round_up(<span class="fl">12.146</span>, <span class="dv">2</span>)) → <span class="fl">12.15</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6">@(round_up(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:split"></a></p>
<h2 id="splittext-delimiters">split(text, delimiters)</h2>
<p>Splits <code>text</code> based on the characters in <code>delimiters</code></p>
<p>Empty values are removed from the returned list</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb63-1" data-line-number="1">@(split(<span class="st">&quot;a b c&quot;</span>, <span class="st">&quot; &quot;</span>)) → [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>]</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">@(split(<span class="st">&quot;a&quot;</span>, <span class="st">&quot; &quot;</span>)) → [<span class="st">&quot;a&quot;</span>]</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">@(split(<span class="st">&quot;abc..d&quot;</span>, <span class="st">&quot;.&quot;</span>)) → [<span class="st">&quot;abc&quot;</span>,<span class="st">&quot;d&quot;</span>]</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">@(split(<span class="st">&quot;a.b.c.&quot;</span>, <span class="st">&quot;.&quot;</span>)) → [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>]</a>
<a class="sourceLine" id="cb63-5" data-line-number="5">@(split(<span class="st">&quot;a|b,c  d&quot;</span>, <span class="st">&quot; .|,&quot;</span>)) → [<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>]</a></code></pre></div>
<p><a name="function:text"></a></p>
<h2 id="textvalue">text(value)</h2>
<p>Tries to convert <code>value</code> to text. An error is returned if the value can’t be converted.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb64-1" data-line-number="1">@(text(<span class="dv">3</span> = <span class="dv">3</span>)) → true</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">@(json(text(<span class="fl">123.45</span>))) → <span class="st">&quot;123.45&quot;</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3">@(text(<span class="dv">1</span> / <span class="dv">0</span>)) → ERROR</a></code></pre></div>
<p><a name="function:text_compare"></a></p>
<h2 id="text_comparetext1-text2">text_compare(text1, text2)</h2>
<p>Returns the comparison between the strings <code>text1</code> and <code>text2</code>. The return value will be -1 if str1 is smaller than str2, 0 if they are equal and 1 if str1 is greater than str2</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb65-1" data-line-number="1">@(text_compare(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;abc&quot;</span>)) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2">@(text_compare(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;def&quot;</span>)) → <span class="dv">-1</span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3">@(text_compare(<span class="st">&quot;zzz&quot;</span>, <span class="st">&quot;aaa&quot;</span>)) → <span class="dv">1</span></a></code></pre></div>
<p><a name="function:title"></a></p>
<h2 id="titletext">title(text)</h2>
<p>Titlecases the passed in <code>text</code>, capitalizing each word</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb66-1" data-line-number="1">@(title(<span class="st">&quot;foo&quot;</span>)) → Foo</a>
<a class="sourceLine" id="cb66-2" data-line-number="2">@(title(<span class="st">&quot;ryan lewis&quot;</span>)) → Ryan Lewis</a>
<a class="sourceLine" id="cb66-3" data-line-number="3">@(title(<span class="dv">123</span>)) → <span class="dv">123</span></a></code></pre></div>
<p><a name="function:to_epoch"></a></p>
<h2 id="to_epochdate">to_epoch(date)</h2>
<p>Converts <code>date</code> to the number of nanoseconds since January 1st, 1970 GMT</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb67-1" data-line-number="1">@(to_epoch(<span class="st">&quot;2017-06-12T16:56:59.000000Z&quot;</span>)) → <span class="dv">1497286619000000000</span></a></code></pre></div>
<p><a name="function:today"></a></p>
<h2 id="today">today()</h2>
<p>Returns the current date in the current timezone, time is set to midnight in the environment timezone</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb68-1" data-line-number="1">@(today()) → <span class="dv">2018-04</span>-11T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a></code></pre></div>
<p><a name="function:tz"></a></p>
<h2 id="tzdate">tz(date)</h2>
<p>Returns the timezone for `date``</p>
<p>If not timezone information is present in the date, then the environment’s timezone will be returned</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb69-1" data-line-number="1">@(tz(<span class="st">&quot;2017-01-15T02:15:18.123456Z&quot;</span>)) → UTC</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">@(tz(<span class="st">&quot;2017-01-15 02:15:18PM&quot;</span>)) → America/Guayaquil</a>
<a class="sourceLine" id="cb69-3" data-line-number="3">@(tz(<span class="st">&quot;2017-01-15&quot;</span>)) → America/Guayaquil</a>
<a class="sourceLine" id="cb69-4" data-line-number="4">@(tz(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:tz_offset"></a></p>
<h2 id="tz_offsetdate">tz_offset(date)</h2>
<p>Returns the offset for the timezone as text +/- HHMM for <code>date</code></p>
<p>If no timezone information is present in the date, then the environment’s timezone offset will be returned</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb70-1" data-line-number="1">@(tz_offset(<span class="st">&quot;2017-01-15T02:15:18.123456Z&quot;</span>)) → +<span class="dv">0000</span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2">@(tz_offset(<span class="st">&quot;2017-01-15 02:15:18PM&quot;</span>)) → <span class="dv">-0500</span></a>
<a class="sourceLine" id="cb70-3" data-line-number="3">@(tz_offset(<span class="st">&quot;2017-01-15&quot;</span>)) → <span class="dv">-0500</span></a>
<a class="sourceLine" id="cb70-4" data-line-number="4">@(tz_offset(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:upper"></a></p>
<h2 id="uppertext">upper(text)</h2>
<p>Uppercases all characters in the passed <code>text</code></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb71-1" data-line-number="1">@(upper(<span class="st">&quot;Asdf&quot;</span>)) → ASDF</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">@(upper(<span class="dv">123</span>)) → <span class="dv">123</span></a></code></pre></div>
<p><a name="function:url_encode"></a></p>
<h2 id="url_encodetext">url_encode(text)</h2>
<p>URL encodes <code>text</code> for use in a URL parameter</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb72-1" data-line-number="1">@(url_encode(<span class="st">&quot;two words&quot;</span>)) → two+words</a>
<a class="sourceLine" id="cb72-2" data-line-number="2">@(url_encode(<span class="dv">10</span>)) → <span class="dv">10</span></a></code></pre></div>
<p><a name="function:weekday"></a></p>
<h2 id="weekdaydate">weekday(date)</h2>
<p>Returns the day of the week for <code>date</code>, 0 is sunday, 1 is monday..</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb73-1" data-line-number="1">@(weekday(<span class="st">&quot;2017-01-15&quot;</span>)) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2">@(weekday(<span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="function:word"></a></p>
<h2 id="wordtext-index-delimiters">word(text, index [,delimiters])</h2>
<p>Returns the word at the passed in <code>index</code> for the passed in <code>text</code>. There is an optional final parameter <code>delimiters</code> which is string of characters used to split the text into words.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb74-1" data-line-number="1">@(word(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">0</span>)) → bee</a>
<a class="sourceLine" id="cb74-2" data-line-number="2">@(word(<span class="st">&quot;bee.cat,dog&quot;</span>, <span class="dv">0</span>)) → bee</a>
<a class="sourceLine" id="cb74-3" data-line-number="3">@(word(<span class="st">&quot;bee.cat,dog&quot;</span>, <span class="dv">1</span>)) → cat</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">@(word(<span class="st">&quot;bee.cat,dog&quot;</span>, <span class="dv">2</span>)) → dog</a>
<a class="sourceLine" id="cb74-5" data-line-number="5">@(word(<span class="st">&quot;bee.cat,dog&quot;</span>, <span class="dv">-1</span>)) → dog</a>
<a class="sourceLine" id="cb74-6" data-line-number="6">@(word(<span class="st">&quot;bee.cat,dog&quot;</span>, <span class="dv">-2</span>)) → cat</a>
<a class="sourceLine" id="cb74-7" data-line-number="7">@(word(<span class="st">&quot;bee.*cat,dog&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;.*=|&quot;</span>)) → cat,dog</a>
<a class="sourceLine" id="cb74-8" data-line-number="8">@(word(<span class="st">&quot;O&#39;Grady O&#39;Flaggerty&quot;</span>, <span class="dv">1</span>, <span class="st">&quot; &quot;</span>)) → O&#39;Flaggerty</a></code></pre></div>
<p><a name="function:word_count"></a></p>
<h2 id="word_counttext-delimiters">word_count(text [,delimiters])</h2>
<p>Returns the number of words in <code>text</code>. There is an optional final parameter <code>delimiters</code> which is string of characters used to split the text into words.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb75-1" data-line-number="1">@(word_count(<span class="st">&quot;foo bar&quot;</span>)) → <span class="dv">2</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2">@(word_count(<span class="dv">10</span>)) → <span class="dv">1</span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3">@(word_count(<span class="st">&quot;&quot;</span>)) → <span class="dv">0</span></a>
<a class="sourceLine" id="cb75-4" data-line-number="4">@(word_count(<span class="st">&quot;😀😃😄😁&quot;</span>)) → <span class="dv">4</span></a>
<a class="sourceLine" id="cb75-5" data-line-number="5">@(word_count(<span class="st">&quot;bee.*cat,dog&quot;</span>, <span class="st">&quot;.*=|&quot;</span>)) → <span class="dv">2</span></a>
<a class="sourceLine" id="cb75-6" data-line-number="6">@(word_count(<span class="st">&quot;O&#39;Grady O&#39;Flaggerty&quot;</span>, <span class="st">&quot; &quot;</span>)) → <span class="dv">2</span></a></code></pre></div>
<p><a name="function:word_slice"></a></p>
<h2 id="word_slicetext-start-end-delimiters">word_slice(text, start, end [,delimiters])</h2>
<p>Extracts a substring from <code>text</code> spanning from <code>start</code> up to but not-including <code>end</code>. (first word is 0). A negative end value means that all words after the start should be returned. There is an optional final parameter <code>delimiters</code> which is string of characters used to split the text into words.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb76-1" data-line-number="1">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">0</span>, <span class="dv">1</span>)) → bee</a>
<a class="sourceLine" id="cb76-2" data-line-number="2">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">0</span>, <span class="dv">2</span>)) → bee cat</a>
<a class="sourceLine" id="cb76-3" data-line-number="3">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">1</span>, <span class="dv">-1</span>)) → cat dog</a>
<a class="sourceLine" id="cb76-4" data-line-number="4">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">1</span>)) → cat dog</a>
<a class="sourceLine" id="cb76-5" data-line-number="5">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">2</span>, <span class="dv">3</span>)) → dog</a>
<a class="sourceLine" id="cb76-6" data-line-number="6">@(word_slice(<span class="st">&quot;bee cat dog&quot;</span>, <span class="dv">3</span>, <span class="dv">10</span>)) →</a>
<a class="sourceLine" id="cb76-7" data-line-number="7">@(word_slice(<span class="st">&quot;bee.*cat,dog&quot;</span>, <span class="dv">1</span>, <span class="dv">-1</span>, <span class="st">&quot;.*=|,&quot;</span>)) → cat dog</a>
<a class="sourceLine" id="cb76-8" data-line-number="8">@(word_slice(<span class="st">&quot;O&#39;Grady O&#39;Flaggerty&quot;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot; &quot;</span>)) → O&#39;Flaggerty</a></code></pre></div>
</div>
<h1 id="router-tests">Router Tests</h1>
<p>Router tests are a special class of functions which are used within the switch router. They are called in the same way as normal functions, but all return a test result object which by default evalutes to true or false, but can also be used to find the matching portion of the test by using the <code>match</code> component of the result. The flow editor builds these expressions using UI widgets, but they can be used anywhere a normal template function is used.</p>
<div class="tests">
<p><a name="test:has_all_words"></a></p>
<h2 id="has_all_wordstext-words">has_all_words(text, words)</h2>
<p>Tests whether all the <code>words</code> are contained in <code>text</code></p>
<p>The words can be in any order and may appear more than once.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb77-1" data-line-number="1">@(has_all_words(<span class="st">&quot;the quick brown FOX&quot;</span>, <span class="st">&quot;the fox&quot;</span>)) → true</a>
<a class="sourceLine" id="cb77-2" data-line-number="2">@(has_all_words(<span class="st">&quot;the quick brown FOX&quot;</span>, <span class="st">&quot;the fox&quot;</span>).match) → the FOX</a>
<a class="sourceLine" id="cb77-3" data-line-number="3">@(has_all_words(<span class="st">&quot;the quick brown fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_any_word"></a></p>
<h2 id="has_any_wordtext-words">has_any_word(text, words)</h2>
<p>Tests whether any of the <code>words</code> are contained in the <code>text</code></p>
<p>Only one of the words needs to match and it may appear more than once.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb78-1" data-line-number="1">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;fox quick&quot;</span>)) → true</a>
<a class="sourceLine" id="cb78-2" data-line-number="2">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) → true</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">@(has_any_word(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>).match) → Fox</a></code></pre></div>
<p><a name="test:has_beginning"></a></p>
<h2 id="has_beginningtext-beginning">has_beginning(text, beginning)</h2>
<p>Tests whether <code>text</code> starts with <code>beginning</code></p>
<p>Both text values are trimmed of surrounding whitespace, but otherwise matching is strict without any tokenization.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb79-1" data-line-number="1">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the quick&quot;</span>)) → true</a>
<a class="sourceLine" id="cb79-2" data-line-number="2">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the quick&quot;</span>).match) → The Quick</a>
<a class="sourceLine" id="cb79-3" data-line-number="3">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;the   quick&quot;</span>)) → false</a>
<a class="sourceLine" id="cb79-4" data-line-number="4">@(has_beginning(<span class="st">&quot;The Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_date"></a></p>
<h2 id="has_datetext">has_date(text)</h2>
<p>Tests whether <code>text</code> contains a date formatted according to our environment</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb80-1" data-line-number="1">@(has_date(<span class="st">&quot;the date is 2017-01-15&quot;</span>)) → true</a>
<a class="sourceLine" id="cb80-2" data-line-number="2">@(has_date(<span class="st">&quot;the date is 2017-01-15&quot;</span>).match) → <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3">@(has_date(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_date_eq"></a></p>
<h2 id="has_date_eqtext-date">has_date_eq(text, date)</h2>
<p>Tests whether <code>text</code> a date equal to <code>date</code></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb81-1" data-line-number="1">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>)) → true</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>).match) → <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb81-3" data-line-number="3">@(has_date_eq(<span class="st">&quot;the date is 2017-01-15 15:00&quot;</span>, <span class="st">&quot;2017-01-15&quot;</span>)) → false</a>
<a class="sourceLine" id="cb81-4" data-line-number="4">@(has_date_eq(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) → false</a>
<a class="sourceLine" id="cb81-5" data-line-number="5">@(has_date_eq(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_date_gt"></a></p>
<h2 id="has_date_gttext-min">has_date_gt(text, min)</h2>
<p>Tests whether <code>text</code> a date after the date <code>min</code></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb82-1" data-line-number="1">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-01&quot;</span>)) → true</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-01-01&quot;</span>).match) → <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb82-3" data-line-number="3">@(has_date_gt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-03-15&quot;</span>)) → false</a>
<a class="sourceLine" id="cb82-4" data-line-number="4">@(has_date_gt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) → false</a>
<a class="sourceLine" id="cb82-5" data-line-number="5">@(has_date_gt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_date_lt"></a></p>
<h2 id="has_date_lttext-max">has_date_lt(text, max)</h2>
<p>Tests whether <code>text</code> contains a date before the date <code>max</code></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb83-1" data-line-number="1">@(has_date_lt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) → true</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">@(has_date_lt(<span class="st">&quot;the date is 2017-01-15&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>).match) → <span class="dv">2017-01</span>-15T00:<span class="dv">00</span>:<span class="fl">00.000000</span><span class="dv">-05</span>:<span class="dv">00</span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3">@(has_date_lt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;2017-06-01&quot;</span>)) → false</a>
<a class="sourceLine" id="cb83-4" data-line-number="4">@(has_date_lt(<span class="st">&quot;there is no date here, just a year 2017&quot;</span>, <span class="st">&quot;not date&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_district"></a></p>
<h2 id="has_districttext-state">has_district(text, state)</h2>
<p>Tests whether a district name is contained in the <code>text</code>. If <code>state</code> is also provided then the returned district must be within that state.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb84-1" data-line-number="1">@(has_district(<span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → true</a>
<a class="sourceLine" id="cb84-2" data-line-number="2">@(has_district(<span class="st">&quot;I live in Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → true</a>
<a class="sourceLine" id="cb84-3" data-line-number="3">@(has_district(<span class="st">&quot;I live in Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>).match) → Rwanda &gt; Kigali City &gt; Gasabo</a>
<a class="sourceLine" id="cb84-4" data-line-number="4">@(has_district(<span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Boston&quot;</span>)) → false</a>
<a class="sourceLine" id="cb84-5" data-line-number="5">@(has_district(<span class="st">&quot;Gasabo&quot;</span>)) → true</a></code></pre></div>
<p><a name="test:has_email"></a></p>
<h2 id="has_emailtext">has_email(text)</h2>
<p>Tests whether an email is contained in <code>text</code></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb85-1" data-line-number="1">@(has_email(<span class="st">&quot;my email is foo1@bar.com, please respond&quot;</span>)) → true</a>
<a class="sourceLine" id="cb85-2" data-line-number="2">@(has_email(<span class="st">&quot;my email is foo1@bar.com, please respond&quot;</span>).match) → foo1@bar.com</a>
<a class="sourceLine" id="cb85-3" data-line-number="3">@(has_email(<span class="st">&quot;my email is &lt;foo@bar2.com&gt;&quot;</span>)) → true</a>
<a class="sourceLine" id="cb85-4" data-line-number="4">@(has_email(<span class="st">&quot;i&#39;m not sharing my email&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_group"></a></p>
<h2 id="has_groupcontact-group_uuid">has_group(contact, group_uuid)</h2>
<p>Returns whether the <code>contact</code> is part of group with the passed in UUID</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb86-1" data-line-number="1">@(has_group(contact, <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span>)) → true</a>
<a class="sourceLine" id="cb86-2" data-line-number="2">@(has_group(contact, <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span>).match) → Testers</a>
<a class="sourceLine" id="cb86-3" data-line-number="3">@(has_group(contact, <span class="st">&quot;97fe7029-3a15-4005-b0c7-277b884fc1d5&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_number"></a></p>
<h2 id="has_numbertext">has_number(text)</h2>
<p>Tests whether <code>text</code> contains a number</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb87-1" data-line-number="1">@(has_number(<span class="st">&quot;the number is 42&quot;</span>)) → true</a>
<a class="sourceLine" id="cb87-2" data-line-number="2">@(has_number(<span class="st">&quot;the number is 42&quot;</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3">@(has_number(<span class="st">&quot;the number is forty two&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_number_between"></a></p>
<h2 id="has_number_betweentext-min-max">has_number_between(text, min, max)</h2>
<p>Tests whether <code>text</code> contains a number between <code>min</code> and <code>max</code> inclusive</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb88-1" data-line-number="1">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>, <span class="dv">44</span>)) → true</a>
<a class="sourceLine" id="cb88-2" data-line-number="2">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>, <span class="dv">44</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3">@(has_number_between(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">50</span>, <span class="dv">60</span>)) → false</a>
<a class="sourceLine" id="cb88-4" data-line-number="4">@(has_number_between(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">50</span>, <span class="dv">60</span>)) → false</a>
<a class="sourceLine" id="cb88-5" data-line-number="5">@(has_number_between(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="dv">60</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_number_eq"></a></p>
<h2 id="has_number_eqtext-value">has_number_eq(text, value)</h2>
<p>Tests whether <code>text</code> contains a number equal to the <code>value</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb89-1" data-line-number="1">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) → true</a>
<a class="sourceLine" id="cb89-2" data-line-number="2">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb89-3" data-line-number="3">@(has_number_eq(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb89-4" data-line-number="4">@(has_number_eq(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb89-5" data-line-number="5">@(has_number_eq(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_number_gt"></a></p>
<h2 id="has_number_gttext-min">has_number_gt(text, min)</h2>
<p>Tests whether <code>text</code> contains a number greater than <code>min</code></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb90-1" data-line-number="1">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) → true</a>
<a class="sourceLine" id="cb90-2" data-line-number="2">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3">@(has_number_gt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) → false</a>
<a class="sourceLine" id="cb90-4" data-line-number="4">@(has_number_gt(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb90-5" data-line-number="5">@(has_number_gt(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_number_gte"></a></p>
<h2 id="has_number_gtetext-min">has_number_gte(text, min)</h2>
<p>Tests whether <code>text</code> contains a number greater than or equal to <code>min</code></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb91-1" data-line-number="1">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) → true</a>
<a class="sourceLine" id="cb91-2" data-line-number="2">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb91-3" data-line-number="3">@(has_number_gte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">45</span>)) → false</a>
<a class="sourceLine" id="cb91-4" data-line-number="4">@(has_number_gte(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb91-5" data-line-number="5">@(has_number_gte(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_number_lt"></a></p>
<h2 id="has_number_lttext-max">has_number_lt(text, max)</h2>
<p>Tests whether <code>text</code> contains a number less than <code>max</code></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb92-1" data-line-number="1">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>)) → true</a>
<a class="sourceLine" id="cb92-2" data-line-number="2">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb92-3" data-line-number="3">@(has_number_lt(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">@(has_number_lt(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb92-5" data-line-number="5">@(has_number_lt(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_number_lte"></a></p>
<h2 id="has_number_ltetext-max">has_number_lte(text, max)</h2>
<p>Tests whether <code>text</code> contains a number less than or equal to <code>max</code></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb93-1" data-line-number="1">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">42</span>)) → true</a>
<a class="sourceLine" id="cb93-2" data-line-number="2">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">44</span>).match) → <span class="dv">42</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3">@(has_number_lte(<span class="st">&quot;the number is 42&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb93-4" data-line-number="4">@(has_number_lte(<span class="st">&quot;the number is not there&quot;</span>, <span class="dv">40</span>)) → false</a>
<a class="sourceLine" id="cb93-5" data-line-number="5">@(has_number_lte(<span class="st">&quot;the number is not there&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:has_only_phrase"></a></p>
<h2 id="has_only_phrasetext-phrase">has_only_phrase(text, phrase)</h2>
<p>Tests whether the <code>text</code> contains only <code>phrase</code></p>
<p>The phrase must be the only text in the text to match</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb94-1" data-line-number="1">@(has_only_phrase(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) → false</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">@(has_only_phrase(<span class="st">&quot;Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>)) → true</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">@(has_only_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;&quot;</span>)) → false</a>
<a class="sourceLine" id="cb94-4" data-line-number="4">@(has_only_phrase(<span class="st">&quot;&quot;</span>, <span class="st">&quot;&quot;</span>)) → true</a>
<a class="sourceLine" id="cb94-5" data-line-number="5">@(has_only_phrase(<span class="st">&quot;Quick Brown&quot;</span>, <span class="st">&quot;quick brown&quot;</span>).match) → Quick Brown</a>
<a class="sourceLine" id="cb94-6" data-line-number="6">@(has_only_phrase(<span class="st">&quot;The Quick Brown Fox&quot;</span>, <span class="st">&quot;red fox&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_pattern"></a></p>
<h2 id="has_patterntext-pattern">has_pattern(text, pattern)</h2>
<p>Tests whether <code>text</code> matches the regex <code>pattern</code></p>
<p>Both text values are trimmed of surrounding whitespace and matching is case-insensitive.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb95-1" data-line-number="1">@(has_pattern(<span class="st">&quot;Sell cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>)) → false</a>
<a class="sourceLine" id="cb95-2" data-line-number="2">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>)) → true</a>
<a class="sourceLine" id="cb95-3" data-line-number="3">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match) → Buy cheese</a>
<a class="sourceLine" id="cb95-4" data-line-number="4">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match.groups[<span class="dv">0</span>]) → Buy cheese</a>
<a class="sourceLine" id="cb95-5" data-line-number="5">@(has_pattern(<span class="st">&quot;Buy cheese please&quot;</span>, <span class="st">&quot;buy (\w+)&quot;</span>).match.groups[<span class="dv">1</span>]) → cheese</a></code></pre></div>
<p><a name="test:has_phone"></a></p>
<h2 id="has_phonetext-country_code">has_phone(text, country_code)</h2>
<p>Tests whether a phone number (in the passed in <code>country_code</code>) is contained in the <code>text</code></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb96-1" data-line-number="1">@(has_phone(<span class="st">&quot;my number is 2067799294&quot;</span>, <span class="st">&quot;US&quot;</span>)) → true</a>
<a class="sourceLine" id="cb96-2" data-line-number="2">@(has_phone(<span class="st">&quot;my number is 206 779 9294&quot;</span>, <span class="st">&quot;US&quot;</span>).match) → +<span class="dv">12067799294</span></a>
<a class="sourceLine" id="cb96-3" data-line-number="3">@(has_phone(<span class="st">&quot;my number is none of your business&quot;</span>, <span class="st">&quot;US&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:has_phrase"></a></p>
<h2 id="has_phrasetext-phrase">has_phrase(text, phrase)</h2>
<p>Tests whether <code>phrase</code> is contained in <code>text</code></p>
<p>The words in the test phrase must appear in the same order with no other words in between.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb97-1" data-line-number="1">@(has_phrase(<span class="st">&quot;the quick brown fox&quot;</span>, <span class="st">&quot;brown fox&quot;</span>)) → true</a>
<a class="sourceLine" id="cb97-2" data-line-number="2">@(has_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;quick fox&quot;</span>)) → false</a>
<a class="sourceLine" id="cb97-3" data-line-number="3">@(has_phrase(<span class="st">&quot;the Quick Brown fox&quot;</span>, <span class="st">&quot;&quot;</span>)) → true</a>
<a class="sourceLine" id="cb97-4" data-line-number="4">@(has_phrase(<span class="st">&quot;the.quick.brown.fox&quot;</span>, <span class="st">&quot;the quick&quot;</span>).match) → the quick</a></code></pre></div>
<p><a name="test:has_state"></a></p>
<h2 id="has_statetext">has_state(text)</h2>
<p>Tests whether a state name is contained in the <code>text</code></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb98-1" data-line-number="1">@(has_state(<span class="st">&quot;Kigali&quot;</span>)) → true</a>
<a class="sourceLine" id="cb98-2" data-line-number="2">@(has_state(<span class="st">&quot;Boston&quot;</span>)) → false</a>
<a class="sourceLine" id="cb98-3" data-line-number="3">@(has_state(<span class="st">&quot;¡Kigali!&quot;</span>)) → true</a>
<a class="sourceLine" id="cb98-4" data-line-number="4">@(has_state(<span class="st">&quot;¡Kigali!&quot;</span>).match) → Rwanda &gt; Kigali City</a>
<a class="sourceLine" id="cb98-5" data-line-number="5">@(has_state(<span class="st">&quot;I live in Kigali&quot;</span>)) → true</a></code></pre></div>
<p><a name="test:has_text"></a></p>
<h2 id="has_texttext">has_text(text)</h2>
<p>Tests whether there the text has any characters in it</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb99-1" data-line-number="1">@(has_text(<span class="st">&quot;quick brown&quot;</span>)) → true</a>
<a class="sourceLine" id="cb99-2" data-line-number="2">@(has_text(<span class="st">&quot;quick brown&quot;</span>).match) → quick brown</a>
<a class="sourceLine" id="cb99-3" data-line-number="3">@(has_text(<span class="st">&quot;&quot;</span>)) → false</a>
<a class="sourceLine" id="cb99-4" data-line-number="4">@(has_text(<span class="st">&quot; </span><span class="sc">\n</span><span class="st">&quot;</span>)) → false</a>
<a class="sourceLine" id="cb99-5" data-line-number="5">@(has_text(<span class="dv">123</span>)) → true</a></code></pre></div>
<p><a name="test:has_value"></a></p>
<h2 id="has_valuevalue">has_value(value)</h2>
<p>Returns whether <code>value</code> is non-nil and not an error</p>
<p>Note that <code>contact.fields</code> and <code>run.results</code> are considered dynamic, so it is not an error to try to retrieve a value from fields or results which don’t exist, rather these return an empty value.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb100-1" data-line-number="1">@(has_value(datetime(<span class="st">&quot;foo&quot;</span>))) → false</a>
<a class="sourceLine" id="cb100-2" data-line-number="2">@(has_value(not.existing)) → false</a>
<a class="sourceLine" id="cb100-3" data-line-number="3">@(has_value(contact.fields.unset)) → false</a>
<a class="sourceLine" id="cb100-4" data-line-number="4">@(has_value(<span class="st">&quot;&quot;</span>)) → false</a>
<a class="sourceLine" id="cb100-5" data-line-number="5">@(has_value(<span class="st">&quot;hello&quot;</span>)) → true</a></code></pre></div>
<p><a name="test:has_wait_timed_out"></a></p>
<h2 id="has_wait_timed_outrun">has_wait_timed_out(run)</h2>
<p>Returns whether the last wait timed out.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb101-1" data-line-number="1">@(has_wait_timed_out(run)) → false</a></code></pre></div>
<p><a name="test:has_ward"></a></p>
<h2 id="has_wardtext-district-state">has_ward(text, district, state)</h2>
<p>Tests whether a ward name is contained in the <code>text</code></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb102-1" data-line-number="1">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → true</a>
<a class="sourceLine" id="cb102-2" data-line-number="2">@(has_ward(<span class="st">&quot;I live in Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → true</a>
<a class="sourceLine" id="cb102-3" data-line-number="3">@(has_ward(<span class="st">&quot;I live in Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>).match) → Rwanda &gt; Kigali City &gt; Gasabo &gt; Gisozi</a>
<a class="sourceLine" id="cb102-4" data-line-number="4">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>)) → false</a>
<a class="sourceLine" id="cb102-5" data-line-number="5">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → false</a>
<a class="sourceLine" id="cb102-6" data-line-number="6">@(has_ward(<span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Gasabo&quot;</span>, <span class="st">&quot;Kigali&quot;</span>)) → false</a>
<a class="sourceLine" id="cb102-7" data-line-number="7">@(has_ward(<span class="st">&quot;Gasabo&quot;</span>)) → false</a>
<a class="sourceLine" id="cb102-8" data-line-number="8">@(has_ward(<span class="st">&quot;Gisozi&quot;</span>)) → true</a></code></pre></div>
<p><a name="test:has_webhook_status"></a></p>
<h2 id="has_webhook_statuswebhook-status">has_webhook_status(webhook, status)</h2>
<p>Tests whether the passed in <code>webhook</code> call has the passed in <code>status</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb103-1" data-line-number="1">@(has_webhook_status(run.webhook, <span class="st">&quot;success&quot;</span>)) → true</a>
<a class="sourceLine" id="cb103-2" data-line-number="2">@(has_webhook_status(run.webhook, <span class="st">&quot;connection_error&quot;</span>)) → false</a>
<a class="sourceLine" id="cb103-3" data-line-number="3">@(has_webhook_status(run.webhook, <span class="st">&quot;success&quot;</span>).match) → {<span class="st">&quot;results&quot;</span>:[{<span class="st">&quot;state&quot;</span>:<span class="st">&quot;WA&quot;</span>},{<span class="st">&quot;state&quot;</span>:<span class="st">&quot;IN&quot;</span>}]}</a>
<a class="sourceLine" id="cb103-4" data-line-number="4">@(has_webhook_status(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;success&quot;</span>)) → ERROR</a></code></pre></div>
<p><a name="test:is_error"></a></p>
<h2 id="is_errorvalue">is_error(value)</h2>
<p>Returns whether <code>value</code> is an error</p>
<p>Note that <code>contact.fields</code> and <code>run.results</code> are considered dynamic, so it is not an error to try to retrieve a value from fields or results which don’t exist, rather these return an empty value.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb104-1" data-line-number="1">@(is_error(datetime(<span class="st">&quot;foo&quot;</span>))) → true</a>
<a class="sourceLine" id="cb104-2" data-line-number="2">@(is_error(run.not.existing)) → true</a>
<a class="sourceLine" id="cb104-3" data-line-number="3">@(is_error(contact.fields.unset)) → true</a>
<a class="sourceLine" id="cb104-4" data-line-number="4">@(is_error(<span class="st">&quot;hello&quot;</span>)) → false</a></code></pre></div>
<p><a name="test:is_text_eq"></a></p>
<h2 id="is_text_eqtext1-text2">is_text_eq(text1, text2)</h2>
<p>Returns whether two text values are equal (case sensitive). In the case that they are, it will return the text as the match.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode objectivec"><code class="sourceCode objectivec"><a class="sourceLine" id="cb105-1" data-line-number="1">@(is_text_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;foo&quot;</span>)) → true</a>
<a class="sourceLine" id="cb105-2" data-line-number="2">@(is_text_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;FOO&quot;</span>)) → false</a>
<a class="sourceLine" id="cb105-3" data-line-number="3">@(is_text_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) → false</a>
<a class="sourceLine" id="cb105-4" data-line-number="4">@(is_text_eq(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot; foo &quot;</span>)) → false</a>
<a class="sourceLine" id="cb105-5" data-line-number="5">@(is_text_eq(run.status, <span class="st">&quot;completed&quot;</span>)) → true</a>
<a class="sourceLine" id="cb105-6" data-line-number="6">@(is_text_eq(run.webhook.status, <span class="st">&quot;success&quot;</span>)) → true</a>
<a class="sourceLine" id="cb105-7" data-line-number="7">@(is_text_eq(run.webhook.status, <span class="st">&quot;connection_error&quot;</span>)) → false</a></code></pre></div>
</div>
<h1 id="action-definitions">Action Definitions</h1>
<p>Actions on a node generate events which can then be ingested by the engine container. In some cases the actions cause an immediate action, such as calling a webhook, in others the engine container is responsible for taking the action based on the event that is output, such as sending messages or updating contact fields. In either case the internal state of the engine is always updated to represent the new state so that flow execution is consistent. For example, while the engine itself does not have access to a contact store, it updates its internal representation of a contact’s state based on action performed on a flow so that later references in the flow are correct.</p>
<div class="actions">
<p><a name="action:add_contact_groups"></a></p>
<h2 id="add_contact_groups">add_contact_groups</h2>
<p>Can be used to add a contact to one or more groups. An <code>contact_groups_added</code> event will be created for the groups which the contact has been added to.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_contact_groups&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb106-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb106-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb106-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb106-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb106-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb107"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4f15f627-b1e2-4851-8dbf-00ecf5d03034&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb107-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb107-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb107-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb107-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:add_contact_urn"></a></p>
<h2 id="add_contact_urn">add_contact_urn</h2>
<p>Can be used to add a URN to the current contact. An <code>contact_urn_added</code> event will be created when this action is encountered. If there is no contact then this action will be ignored.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb108"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_contact_urn&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-4" data-line-number="4">    <span class="dt">&quot;scheme&quot;</span><span class="fu">:</span> <span class="st">&quot;tel&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb108-5" data-line-number="5">    <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;@run.results.phone_number&quot;</span></a>
<a class="sourceLine" id="cb108-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_urn_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b504fe9e-d8a8-47fd-af9c-ff2f1faac4db&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb109-5" data-line-number="5">    <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12344563452&quot;</span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:add_input_labels"></a></p>
<h2 id="add_input_labels">add_input_labels</h2>
<p>Can be used to add labels to the last user input on a flow. An <code>input_labels_added</code> event will be created with the labels added when this action is encountered. If there is no user input at that point then this action will be ignored.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb110"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;add_input_labels&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4">    <span class="dt">&quot;labels&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;3f65d88a-95dc-4140-9451-943e94e06fea&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Spam&quot;</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb110-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb110-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb111"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;input_labels_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;f3cbd795-9bb3-4331-ba82-c15b24dd577f&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5">    <span class="dt">&quot;input_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;9bf91c2b-ce58-4cef-aacc-281e03f69ab5&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6">    <span class="dt">&quot;labels&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb111-7" data-line-number="7">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb111-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;3f65d88a-95dc-4140-9451-943e94e06fea&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb111-9" data-line-number="9">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Spam&quot;</span></a>
<a class="sourceLine" id="cb111-10" data-line-number="10">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb111-11" data-line-number="11">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb111-12" data-line-number="12"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:call_webhook"></a></p>
<h2 id="call_webhook">call_webhook</h2>
<p>Can be used to call an external service and insert the results in <span class="citation" data-cites="run.webhook">@run.webhook</span> context variable. The body, header and url fields may be templates and will be evaluated at runtime.</p>
<p>A <code>webhook_called</code> event will be created based on the results of the HTTP call.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb112"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;call_webhook&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4">    <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;GET&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://localhost:49998/?cmd=success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6">    <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7">        <span class="dt">&quot;Authorization&quot;</span><span class="fu">:</span> <span class="st">&quot;Token AAFFZZHH&quot;</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb112-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb113"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;webhook_called&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;229bd432-dac7-4a3f-ba91-c48ad8c50e6b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-5" data-line-number="5">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;http://localhost:49998/?cmd=success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6">    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7">    <span class="dt">&quot;status_code&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-8" data-line-number="8">    <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;GET /?cmd=success HTTP/1.1</span><span class="ch">\r\n</span><span class="st">Host: localhost:49998</span><span class="ch">\r\n</span><span class="st">User-Agent: goflow-testing</span><span class="ch">\r\n</span><span class="st">Authorization: Token AAFFZZHH</span><span class="ch">\r\n</span><span class="st">Accept-Encoding: gzip</span><span class="ch">\r\n\r\n</span><span class="st">&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb113-9" data-line-number="9">    <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="st">&quot;HTTP/1.1 200 OK</span><span class="ch">\r\n</span><span class="st">Content-Length: 16</span><span class="ch">\r\n</span><span class="st">Content-Type: text/plain; charset=utf-8</span><span class="ch">\r\n</span><span class="st">Date: Wed, 11 Apr 2018 18:24:30 GMT</span><span class="ch">\r\n\r\n</span><span class="st">{ </span><span class="ch">\&quot;</span><span class="st">ok</span><span class="ch">\&quot;</span><span class="st">: </span><span class="ch">\&quot;</span><span class="st">true</span><span class="ch">\&quot;</span><span class="st"> }&quot;</span></a>
<a class="sourceLine" id="cb113-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:remove_contact_groups"></a></p>
<h2 id="remove_contact_groups">remove_contact_groups</h2>
<p>Can be used to remove a contact from one or more groups. A <code>contact_groups_removed</code> event will be created for the groups which the contact is removed from. Groups can either be explicitly provided or <code>all_groups</code> can be set to true to remove the contact from all non-dynamic groups.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;remove_contact_groups&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb114-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb114-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registered Users&quot;</span></a>
<a class="sourceLine" id="cb114-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb114-9" data-line-number="9">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb114-10" data-line-number="10">    <span class="dt">&quot;all_groups&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb114-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb115-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_removed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;e68a851e-6328-426b-a8fd-1537ca860f97&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-5" data-line-number="5">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb115-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb115-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Testers&quot;</span></a>
<a class="sourceLine" id="cb115-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb115-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb115-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:send_broadcast"></a></p>
<h2 id="send_broadcast">send_broadcast</h2>
<p>Can be used to send a message to one or more contacts. It accepts a list of URNs, a list of groups and a list of contacts.</p>
<p>The URNs and text fields may be templates. A <code>send_broadcast</code> event will be created for each unique urn, contact and group with the evaluated text.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb116"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_broadcast&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4">    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi @contact.name, are you ready to complete today&#39;s survey?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-5" data-line-number="5">    <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb116-6" data-line-number="6">    <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb116-7" data-line-number="7">        <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb116-8" data-line-number="8">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb116-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;broadcast_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;5fa51f39-76ea-421c-a71b-fe4af29b871a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-5" data-line-number="5">    <span class="dt">&quot;translations&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb117-6" data-line-number="6">        <span class="dt">&quot;&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb117-7" data-line-number="7">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi Ryan Lewis, are you ready to complete today&#39;s survey?&quot;</span></a>
<a class="sourceLine" id="cb117-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb117-9" data-line-number="9">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb117-10" data-line-number="10">    <span class="dt">&quot;base_language&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb117-11" data-line-number="11">    <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb117-12" data-line-number="12">        <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb117-13" data-line-number="13">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb117-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:send_email"></a></p>
<h2 id="send_email">send_email</h2>
<p>Can be used to send an email to one or more recipients. The subject, body and addresses can all contain expressions.</p>
<p>An <code>email_created</code> event will be created for each email address.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_email&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-4" data-line-number="4">    <span class="dt">&quot;addresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5">        <span class="st">&quot;@contact.urns.mailto.0&quot;</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-7" data-line-number="7">    <span class="dt">&quot;subject&quot;</span><span class="fu">:</span> <span class="st">&quot;Here is your activation token&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-8" data-line-number="8">    <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token is @contact.fields.activation_token&quot;</span></a>
<a class="sourceLine" id="cb118-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb119"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;email_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8e64b588-d46e-4016-a5ef-59cf4d9d7a5b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-5" data-line-number="5">    <span class="dt">&quot;addresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb119-6" data-line-number="6">        <span class="st">&quot;foo@bar.com&quot;</span></a>
<a class="sourceLine" id="cb119-7" data-line-number="7">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-8" data-line-number="8">    <span class="dt">&quot;subject&quot;</span><span class="fu">:</span> <span class="st">&quot;Here is your activation token&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb119-9" data-line-number="9">    <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token is AACC55&quot;</span></a>
<a class="sourceLine" id="cb119-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:send_msg"></a></p>
<h2 id="send_msg">send_msg</h2>
<p>Can be used to reply to the current contact in a flow. The text field may contain templates.</p>
<p>A <code>broadcast_created</code> event will be created with the evaluated text.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;send_msg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4">    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi @contact.name, are you ready to complete today&#39;s survey?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb120-5" data-line-number="5">    <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[]</span></a>
<a class="sourceLine" id="cb120-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;08eba586-0bb1-47ab-8c15-15a7c0c5228d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-5" data-line-number="5">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb121-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;40c152ee-c9ed-46ff-9c02-6222e1badc14&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-7" data-line-number="7">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-8" data-line-number="8">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb121-9" data-line-number="9">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;57f1078f-88aa-46f4-a59a-948a5739c03d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb121-10" data-line-number="10">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;My Android Phone&quot;</span></a>
<a class="sourceLine" id="cb121-11" data-line-number="11">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb121-12" data-line-number="12">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Hi Ryan Lewis, are you ready to complete today&#39;s survey?&quot;</span></a>
<a class="sourceLine" id="cb121-13" data-line-number="13">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb121-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_contact_channel"></a></p>
<h2 id="set_contact_channel">set_contact_channel</h2>
<p>Can be used to update the preferred channel of the current contact.</p>
<p>A <code>contact_channel_changed</code> event will be created with the set channel.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb122"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb122-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_channel&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-4" data-line-number="4">    <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb122-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4bb288a0-7fca-4da1-abe8-59a593aff648&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb122-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;FAcebook Channel&quot;</span></a>
<a class="sourceLine" id="cb122-7" data-line-number="7">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb122-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_channel_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;10c62052-7db1-49d1-b8ba-60d66db82e39&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-5" data-line-number="5">    <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb123-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4bb288a0-7fca-4da1-abe8-59a593aff648&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;FAcebook Channel&quot;</span></a>
<a class="sourceLine" id="cb123-8" data-line-number="8">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb123-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_contact_field"></a></p>
<h2 id="set_contact_field">set_contact_field</h2>
<p>Can be used to update a field value on the contact. The value is a localizable template and white space is trimmed from the final value. An empty string clears the value. A <code>contact_field_changed</code> event will be created with the corresponding value.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_field&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-4" data-line-number="4">    <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb124-5" data-line-number="5">        <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb124-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb124-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb124-8" data-line-number="8">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb124-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb125"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_field_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;c174a241-6057-41a3-874b-f17fb8365c22&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-5" data-line-number="5">    <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb125-6" data-line-number="6">        <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb125-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb125-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb125-9" data-line-number="9">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb125-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_contact_language"></a></p>
<h2 id="set_contact_language">set_contact_language</h2>
<p>Can be used to update the name of the contact. The language is a localizable template and white space is trimmed from the final value. An empty string clears the language. A <code>contact_language_changed</code> event will be created with the corresponding value.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb126-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_language&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb126-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4">    <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb126-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_language_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;a08b46fc-f057-4e9a-9bd7-277a6a165264&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5">    <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb127-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_contact_name"></a></p>
<h2 id="set_contact_name">set_contact_name</h2>
<p>Can be used to update the name of the contact. The name is a localizable template and white space is trimmed from the final value. An empty string clears the name. A <code>contact_name_changed</code> event will be created with the corresponding value.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb128"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb128-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_name&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb128-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb128-4" data-line-number="4">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob Smith&quot;</span></a>
<a class="sourceLine" id="cb128-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_name_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;7ca3fc1e-e652-4f5c-979e-17606f578787&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb129-5" data-line-number="5">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob Smith&quot;</span></a>
<a class="sourceLine" id="cb129-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_contact_timezone"></a></p>
<h2 id="set_contact_timezone">set_contact_timezone</h2>
<p>Can be used to update the timezone of the contact. The timezone is a localizable template and white space is trimmed from the final value. An empty string clears the timezone. A <code>contact_timezone_changed</code> event will be created with the corresponding value.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_contact_timezone&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb130-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb130-4" data-line-number="4">    <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;Africa/Kigali&quot;</span></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_timezone_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;fbce9f1c-ddff-45f4-8d46-86b76f70a6a6&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb131-5" data-line-number="5">    <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;Africa/Kigali&quot;</span></a>
<a class="sourceLine" id="cb131-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:set_run_result"></a></p>
<h2 id="set_run_result">set_run_result</h2>
<p>Can be used to save a result for a flow. The result will be available in the context for the run as <span class="citation" data-cites="run.results">@run.results</span>.[name]. The optional category can be used as a way of categorizing results, this can be useful for reporting or analytics.</p>
<p>Both the value and category fields may be templates. A <code>run_result_changed</code> event will be created with the final values.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;set_run_result&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-4" data-line-number="4">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-5" data-line-number="5">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb132-6" data-line-number="6">    <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb132-7" data-line-number="7"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_result_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;e4be9d25-b3ab-4a47-8704-ab259cb52a5d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-5" data-line-number="5">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-6" data-line-number="6">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-7" data-line-number="7">    <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb133-8" data-line-number="8">    <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;c0781400-737f-4940-9a6c-1ec1c3df0325&quot;</span></a>
<a class="sourceLine" id="cb133-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:start_flow"></a></p>
<h2 id="start_flow">start_flow</h2>
<p>Can be used to start a contact down another flow. The current flow will pause until the subflow exits or expires.</p>
<p>A <code>flow_entered</code> event will be created when the flow is started, a <code>flow_exited</code> event will be created upon the subflows exit.</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb134"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;start_flow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb134-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb134-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Collect Language&quot;</span></a>
<a class="sourceLine" id="cb134-7" data-line-number="7">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb134-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb135"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;flow_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;bb7de8fc-d0b0-41a6-bdf0-950b64bbbc6d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-5" data-line-number="5">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb135-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb135-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Collect Language&quot;</span></a>
<a class="sourceLine" id="cb135-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb135-9" data-line-number="9">    <span class="dt">&quot;parent_run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;92ca859f-acf5-4e09-8742-c1eff0201012&quot;</span></a>
<a class="sourceLine" id="cb135-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="action:start_session"></a></p>
<h2 id="start_session">start_session</h2>
<p>Can be used to trigger sessions for other contacts and groups</p>
<div class="input_action">
<h3>
Action
</h3>
<div class="sourceCode" id="cb136"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;start_session&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-3" data-line-number="3">    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8eebd020-1af5-431c-b943-aa670fc74da9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb136-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb136-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb136-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb136-9" data-line-number="9">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-10" data-line-number="10">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb136-11" data-line-number="11">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb136-12" data-line-number="12">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb136-13" data-line-number="13">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb136-14" data-line-number="14"><span class="fu">}</span></a></code></pre></div>
</div>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb137"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;session_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T13:24:30.123456-05:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4">    <span class="dt">&quot;step_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;95dc7ae3-0788-4fb7-b19f-d98753239d65&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-5" data-line-number="5">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-6" data-line-number="6">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-7" data-line-number="7">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb137-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-9" data-line-number="9">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb137-10" data-line-number="10">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-11" data-line-number="11">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1e1ce1e1-9288-4504-869e-022d1003c72a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-12" data-line-number="12">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers&quot;</span></a>
<a class="sourceLine" id="cb137-13" data-line-number="13">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-14" data-line-number="14">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-15" data-line-number="15">    <span class="dt">&quot;run&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-16" data-line-number="16">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;1265aa33-e472-440a-b4b7-2e34e644276e&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-17" data-line-number="17">        <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-18" data-line-number="18">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;50c3706e-fedb-42c0-8eab-dda3335714b7&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-19" data-line-number="19">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb137-20" data-line-number="20">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-21" data-line-number="21">        <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-22" data-line-number="22">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;5d76d86b-3bb9-4d5a-b822-c9d86f5d8e4f&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-23" data-line-number="23">            <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1234567</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-24" data-line-number="24">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Ryan Lewis&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-25" data-line-number="25">            <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-26" data-line-number="26">            <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;America/Guayaquil&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-27" data-line-number="27">            <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-06-20T11:40:30.123456789Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-28" data-line-number="28">            <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb137-29" data-line-number="29">                <span class="st">&quot;tel:+12065551212?channel=57f1078f-88aa-46f4-a59a-948a5739c03d&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb137-30" data-line-number="30">                <span class="st">&quot;twitterid:54784326227#nyaruka&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb137-31" data-line-number="31">                <span class="st">&quot;mailto:foo@bar.com&quot;</span></a>
<a class="sourceLine" id="cb137-32" data-line-number="32">            <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-33" data-line-number="33">            <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb137-34" data-line-number="34">                <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-35" data-line-number="35">                    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-36" data-line-number="36">                    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Testers&quot;</span></a>
<a class="sourceLine" id="cb137-37" data-line-number="37">                <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb137-38" data-line-number="38">                <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-39" data-line-number="39">                    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4f1f98fc-27a7-4a69-bbdb-24744ba739a9&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-40" data-line-number="40">                    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Males&quot;</span></a>
<a class="sourceLine" id="cb137-41" data-line-number="41">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-42" data-line-number="42">            <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-43" data-line-number="43">            <span class="dt">&quot;fields&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-44" data-line-number="44">                <span class="dt">&quot;activation_token&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-45" data-line-number="45">                    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;AACC55&quot;</span></a>
<a class="sourceLine" id="cb137-46" data-line-number="46">                <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-47" data-line-number="47">                <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-48" data-line-number="48">                    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;23&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-49" data-line-number="49">                    <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="dv">23</span></a>
<a class="sourceLine" id="cb137-50" data-line-number="50">                <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-51" data-line-number="51">                <span class="dt">&quot;gender&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-52" data-line-number="52">                    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb137-53" data-line-number="53">                <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-54" data-line-number="54">                <span class="dt">&quot;join_date&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-55" data-line-number="55">                    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;2017-12-02&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-56" data-line-number="56">                    <span class="dt">&quot;datetime&quot;</span><span class="fu">:</span> <span class="st">&quot;2017-12-02T00:00:00-02:00&quot;</span></a>
<a class="sourceLine" id="cb137-57" data-line-number="57">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-58" data-line-number="58">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-59" data-line-number="59">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-60" data-line-number="60">        <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;active&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-61" data-line-number="61">        <span class="dt">&quot;results&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-62" data-line-number="62">            <span class="dt">&quot;favorite_color&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-63" data-line-number="63">                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Favorite Color&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-64" data-line-number="64">                <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;red&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-65" data-line-number="65">                <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Red&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-66" data-line-number="66">                <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;f5bb9b7a-7b5e-45c3-8f0e-61b4e95edf03&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-67" data-line-number="67">                <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T18:24:30.123456Z&quot;</span></a>
<a class="sourceLine" id="cb137-68" data-line-number="68">            <span class="fu">},</span></a>
<a class="sourceLine" id="cb137-69" data-line-number="69">            <span class="dt">&quot;phone_number&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb137-70" data-line-number="70">                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Phone Number&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-71" data-line-number="71">                <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;+12344563452&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-72" data-line-number="72">                <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;f5bb9b7a-7b5e-45c3-8f0e-61b4e95edf03&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb137-73" data-line-number="73">                <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2018-04-11T18:24:30.123456Z&quot;</span></a>
<a class="sourceLine" id="cb137-74" data-line-number="74">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-75" data-line-number="75">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-76" data-line-number="76">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb137-77" data-line-number="77"><span class="fu">}</span></a></code></pre></div>
</div>
</div>
<h1 id="event-definitions">Event Definitions</h1>
<p>Events are the output of a flow run and represent instructions to the engine container on what actions should be taken due to the flow execution. All templates in events have been evaluated and can be used to create concrete messages, contact updates, emails etc by the container.</p>
<div class="events">
<p><a name="event:broadcast_created"></a></p>
<h2 id="broadcast_created">broadcast_created</h2>
<p>Events are created for outgoing broadcasts.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb138"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;broadcast_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4">    <span class="dt">&quot;translations&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb138-5" data-line-number="5">        <span class="dt">&quot;eng&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb138-6" data-line-number="6">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi, what&#39;s up&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-7" data-line-number="7">            <span class="dt">&quot;quick_replies&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb138-8" data-line-number="8">                <span class="st">&quot;All good&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb138-9" data-line-number="9">                <span class="st">&quot;Got 99 problems&quot;</span></a>
<a class="sourceLine" id="cb138-10" data-line-number="10">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb138-11" data-line-number="11">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb138-12" data-line-number="12">        <span class="dt">&quot;spa&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb138-13" data-line-number="13">            <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;Que pasa&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-14" data-line-number="14">            <span class="dt">&quot;quick_replies&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb138-15" data-line-number="15">                <span class="st">&quot;Todo bien&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb138-16" data-line-number="16">                <span class="st">&quot;Tengo 99 problemas&quot;</span></a>
<a class="sourceLine" id="cb138-17" data-line-number="17">            <span class="ot">]</span></a>
<a class="sourceLine" id="cb138-18" data-line-number="18">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb138-19" data-line-number="19">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb138-20" data-line-number="20">    <span class="dt">&quot;base_language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-21" data-line-number="21">    <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb138-22" data-line-number="22">        <span class="st">&quot;tel:+12065551212&quot;</span></a>
<a class="sourceLine" id="cb138-23" data-line-number="23">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-24" data-line-number="24">    <span class="dt">&quot;contacts&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb138-25" data-line-number="25">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb138-26" data-line-number="26">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb138-27" data-line-number="27">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span></a>
<a class="sourceLine" id="cb138-28" data-line-number="28">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb138-29" data-line-number="29">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb138-30" data-line-number="30"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_changed"></a></p>
<h2 id="contact_changed">contact_changed</h2>
<p>Events are created to set a contact on a session</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb139"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb139-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb139-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb139-4" data-line-number="4">    <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb139-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb139-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb139-7" data-line-number="7">        <span class="dt">&quot;urns&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb139-8" data-line-number="8">            <span class="st">&quot;tel:+11231234567&quot;</span></a>
<a class="sourceLine" id="cb139-9" data-line-number="9">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb139-10" data-line-number="10">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb139-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_channel_changed"></a></p>
<h2 id="contact_channel_changed">contact_channel_changed</h2>
<p>Events are created when a contact’s preferred channel is changed.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb140"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_channel_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4">    <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb140-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;67a3ac69-e5e0-4ef0-8423-eddf71a71472&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb140-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb140-7" data-line-number="7">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb140-8" data-line-number="8"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_field_changed"></a></p>
<h2 id="contact_field_changed">contact_field_changed</h2>
<p>Events are created when a contact field is updated.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb141"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_field_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-4" data-line-number="4">    <span class="dt">&quot;field&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb141-5" data-line-number="5">        <span class="dt">&quot;key&quot;</span><span class="fu">:</span> <span class="st">&quot;gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb141-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span></a>
<a class="sourceLine" id="cb141-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb141-8" data-line-number="8">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span></a>
<a class="sourceLine" id="cb141-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_groups_added"></a></p>
<h2 id="contact_groups_added">contact_groups_added</h2>
<p>Events will be created with the groups a contact was added to.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb142"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb142-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb142-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb142-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Reporters&quot;</span></a>
<a class="sourceLine" id="cb142-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb142-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb142-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_groups_removed"></a></p>
<h2 id="contact_groups_removed">contact_groups_removed</h2>
<p>Events are created when a contact has been removed from one or more groups.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb143"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_groups_removed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb143-5" data-line-number="5">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb143-6" data-line-number="6">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb143-7" data-line-number="7">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Reporters&quot;</span></a>
<a class="sourceLine" id="cb143-8" data-line-number="8">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb143-9" data-line-number="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb143-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_language_changed"></a></p>
<h2 id="contact_language_changed">contact_language_changed</h2>
<p>Events are created when a Language of a contact has been changed</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb144"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_language_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb144-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb144-4" data-line-number="4">    <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;eng&quot;</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_name_changed"></a></p>
<h2 id="contact_name_changed">contact_name_changed</h2>
<p>Events are created when a name of a contact has been changed</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb145"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb145-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_name_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob Smith&quot;</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_timezone_changed"></a></p>
<h2 id="contact_timezone_changed">contact_timezone_changed</h2>
<p>Events are created when a timezone of a contact has been changed</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb146"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_timezone_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4">    <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;Africa/Kigali&quot;</span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:contact_urn_added"></a></p>
<h2 id="contact_urn_added">contact_urn_added</h2>
<p>Events will be created with the URN that should be added to the current contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb147"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;contact_urn_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb147-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4">    <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12345678900&quot;</span></a>
<a class="sourceLine" id="cb147-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:email_created"></a></p>
<h2 id="email_created">email_created</h2>
<p>Events are created for each recipient which should receive an email.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb148"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb148-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;email_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb148-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb148-4" data-line-number="4">    <span class="dt">&quot;addresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb148-5" data-line-number="5">        <span class="st">&quot;foo@bar.com&quot;</span></a>
<a class="sourceLine" id="cb148-6" data-line-number="6">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb148-7" data-line-number="7">    <span class="dt">&quot;subject&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb148-8" data-line-number="8">    <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="st">&quot;Your activation token is AAFFKKEE&quot;</span></a>
<a class="sourceLine" id="cb148-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:environment_changed"></a></p>
<h2 id="environment_changed">environment_changed</h2>
<p>Events are created to set the environment on a session</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb149"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb149-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;environment_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb149-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb149-4" data-line-number="4">    <span class="dt">&quot;environment&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb149-5" data-line-number="5">        <span class="dt">&quot;date_format&quot;</span><span class="fu">:</span> <span class="st">&quot;YYYY-MM-DD&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb149-6" data-line-number="6">        <span class="dt">&quot;time_format&quot;</span><span class="fu">:</span> <span class="st">&quot;hh:mm&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb149-7" data-line-number="7">        <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;Africa/Kigali&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb149-8" data-line-number="8">        <span class="dt">&quot;languages&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb149-9" data-line-number="9">            <span class="st">&quot;eng&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb149-10" data-line-number="10">            <span class="st">&quot;fra&quot;</span></a>
<a class="sourceLine" id="cb149-11" data-line-number="11">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb149-12" data-line-number="12">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb149-13" data-line-number="13"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:error"></a></p>
<h2 id="error">error</h2>
<p>Events will be created whenever an error is encountered during flow execution. This can vary from template evaluation errors to invalid actions.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb150"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb150-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb150-4" data-line-number="4">    <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;invalid date format: &#39;12th of October&#39;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb150-5" data-line-number="5">    <span class="dt">&quot;fatal&quot;</span><span class="fu">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb150-6" data-line-number="6"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:flow_triggered"></a></p>
<h2 id="flow_triggered">flow_triggered</h2>
<p>Events are created when an action wants to start a subflow</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb151"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb151-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;flow_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb151-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb151-4" data-line-number="4">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb151-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb151-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb151-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb151-8" data-line-number="8">    <span class="dt">&quot;parent_run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;95eb96df-461b-4668-b168-727f8ceb13dd&quot;</span></a>
<a class="sourceLine" id="cb151-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:input_labels_added"></a></p>
<h2 id="input_labels_added">input_labels_added</h2>
<p>Events will be created with the labels that were applied to the given input.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;input_labels_added&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb152-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4">    <span class="dt">&quot;input_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;4aef4050-1895-4c80-999a-70368317a4f5&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb152-5" data-line-number="5">    <span class="dt">&quot;labels&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb152-7" data-line-number="7">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb152-8" data-line-number="8">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Spam&quot;</span></a>
<a class="sourceLine" id="cb152-9" data-line-number="9">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb152-10" data-line-number="10">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb152-11" data-line-number="11"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:msg_created"></a></p>
<h2 id="msg_created">msg_created</h2>
<p>Events are used for replies to the session contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb153"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb153-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_created&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-4" data-line-number="4">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb153-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;2d611e17-fb22-457f-b802-b8f7ec5cda5b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-6" data-line-number="6">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-7" data-line-number="7">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb153-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;61602f3e-f603-4c70-8a8f-c477505bf4bf&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-9" data-line-number="9">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb153-10" data-line-number="10">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb153-11" data-line-number="11">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi there&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb153-12" data-line-number="12">        <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb153-13" data-line-number="13">            <span class="st">&quot;https://s3.amazon.com/mybucket/attachment.jpg&quot;</span></a>
<a class="sourceLine" id="cb153-14" data-line-number="14">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb153-15" data-line-number="15">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb153-16" data-line-number="16"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:msg_received"></a></p>
<h2 id="msg_received">msg_received</h2>
<p>Events are used for starting flows or resuming flows which are waiting for a message. They represent an incoming message for a contact.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_received&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-4" data-line-number="4">    <span class="dt">&quot;msg&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb154-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;2d611e17-fb22-457f-b802-b8f7ec5cda5b&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-6" data-line-number="6">        <span class="dt">&quot;urn&quot;</span><span class="fu">:</span> <span class="st">&quot;tel:+12065551212&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-7" data-line-number="7">        <span class="dt">&quot;channel&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb154-8" data-line-number="8">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;61602f3e-f603-4c70-8a8f-c477505bf4bf&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-9" data-line-number="9">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Twilio&quot;</span></a>
<a class="sourceLine" id="cb154-10" data-line-number="10">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb154-11" data-line-number="11">        <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;hi there&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb154-12" data-line-number="12">        <span class="dt">&quot;attachments&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb154-13" data-line-number="13">            <span class="st">&quot;https://s3.amazon.com/mybucket/attachment.jpg&quot;</span></a>
<a class="sourceLine" id="cb154-14" data-line-number="14">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb154-15" data-line-number="15">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb154-16" data-line-number="16"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:msg_wait"></a></p>
<h2 id="msg_wait">msg_wait</h2>
<p>Events are created when a flow pauses waiting for a response from a contact. If a timeout is set, then the caller should resume the flow after the number of seconds in the timeout to resume it.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb155"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb155-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;msg_wait&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb155-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span></a>
<a class="sourceLine" id="cb155-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:nothing_wait"></a></p>
<h2 id="nothing_wait">nothing_wait</h2>
<p>Events are created when a flow requests to hand back control to the caller but isn’t waiting for anything from the caller.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb156"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;nothing_wait&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb156-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05.234532Z&quot;</span></a>
<a class="sourceLine" id="cb156-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:run_expired"></a></p>
<h2 id="run_expired">run_expired</h2>
<p>Events are sent by the caller to notify the engine that a run has expired</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb157"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_expired&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb157-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4">    <span class="dt">&quot;run_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span></a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:run_result_changed"></a></p>
<h2 id="run_result_changed">run_result_changed</h2>
<p>Events are created when a result is saved. They contain not only the name, value and category of the result, but also the UUID of the node where the result was generated.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb158"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;run_result_changed&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-4" data-line-number="4">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Gender&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-5" data-line-number="5">    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;m&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-6" data-line-number="6">    <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;Male&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-7" data-line-number="7">    <span class="dt">&quot;category_localized&quot;</span><span class="fu">:</span> <span class="st">&quot;Homme&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-8" data-line-number="8">    <span class="dt">&quot;node_uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb158-9" data-line-number="9">    <span class="dt">&quot;input&quot;</span><span class="fu">:</span> <span class="st">&quot;M&quot;</span></a>
<a class="sourceLine" id="cb158-10" data-line-number="10"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:session_triggered"></a></p>
<h2 id="session_triggered">session_triggered</h2>
<p>Events are created when an action wants to start a subflow</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb159"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb159-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb159-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;session_triggered&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-4" data-line-number="4">    <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-5" data-line-number="5">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;0e06f977-cbb7-475f-9d0b-a0c4aaec7f6a&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-6" data-line-number="6">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Registration&quot;</span></a>
<a class="sourceLine" id="cb159-7" data-line-number="7">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb159-8" data-line-number="8">    <span class="dt">&quot;groups&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb159-9" data-line-number="9">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-10" data-line-number="10">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;8f8e2cae-3c8d-4dce-9c4b-19514437e427&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-11" data-line-number="11">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;New contacts&quot;</span></a>
<a class="sourceLine" id="cb159-12" data-line-number="12">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-13" data-line-number="13">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-14" data-line-number="14">    <span class="dt">&quot;run&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-15" data-line-number="15">        <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;b7cf0d83-f1c9-411c-96fd-c511a4cfa86d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-16" data-line-number="16">        <span class="dt">&quot;flow&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-17" data-line-number="17">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;93c554a1-b90d-4892-b029-a2a87dec9b87&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-18" data-line-number="18">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Other Flow&quot;</span></a>
<a class="sourceLine" id="cb159-19" data-line-number="19">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb159-20" data-line-number="20">        <span class="dt">&quot;contact&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-21" data-line-number="21">            <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;c59b0033-e748-4240-9d4c-e85eb6800151&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-22" data-line-number="22">            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Bob&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-23" data-line-number="23">            <span class="dt">&quot;fields&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-24" data-line-number="24">                <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-25" data-line-number="25">                    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Azuay&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-26" data-line-number="26">                    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2000-01-01T00:00:00.000000000-00:00&quot;</span></a>
<a class="sourceLine" id="cb159-27" data-line-number="27">                <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-28" data-line-number="28">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-29" data-line-number="29">        <span class="fu">},</span></a>
<a class="sourceLine" id="cb159-30" data-line-number="30">        <span class="dt">&quot;results&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-31" data-line-number="31">            <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb159-32" data-line-number="32">                <span class="dt">&quot;result_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Age&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-33" data-line-number="33">                <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;33&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-34" data-line-number="34">                <span class="dt">&quot;node&quot;</span><span class="fu">:</span> <span class="st">&quot;cd2be8c4-59bc-453c-8777-dec9a80043b8&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb159-35" data-line-number="35">                <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2000-01-01T00:00:00.000000000-00:00&quot;</span></a>
<a class="sourceLine" id="cb159-36" data-line-number="36">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-37" data-line-number="37">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-38" data-line-number="38">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb159-39" data-line-number="39"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:wait_timed_out"></a></p>
<h2 id="wait_timed_out">wait_timed_out</h2>
<p>Events are sent by the caller when a wait has timed out - i.e. they are sent instead of the item that the wait was waiting for</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb160"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb160-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;wait_timed_out&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb160-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span></a>
<a class="sourceLine" id="cb160-4" data-line-number="4"><span class="fu">}</span></a></code></pre></div>
</div>
<p><a name="event:webhook_called"></a></p>
<h2 id="webhook_called">webhook_called</h2>
<p>Events are created when a webhook is called. The event contains the status and status code of the response, as well as a full dump of the request and response.</p>
<div class="output_event">
<h3>
Event
</h3>
<div class="sourceCode" id="cb161"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb161-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb161-2" data-line-number="2">    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;webhook_called&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-3" data-line-number="3">    <span class="dt">&quot;created_on&quot;</span><span class="fu">:</span> <span class="st">&quot;2006-01-02T15:04:05Z&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-4" data-line-number="4">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-5" data-line-number="5">    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-6" data-line-number="6">    <span class="dt">&quot;status_code&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-7" data-line-number="7">    <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;GET https://api.ipify.org?format=json&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb161-8" data-line-number="8">    <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="st">&quot;HTTP/1.1 200 OK {</span><span class="ch">\&quot;</span><span class="st">ip</span><span class="ch">\&quot;</span><span class="st">:</span><span class="ch">\&quot;</span><span class="st">190.154.48.130</span><span class="ch">\&quot;</span><span class="st">}&quot;</span></a>
<a class="sourceLine" id="cb161-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</div>
</div>
</body>
</html> 
    

</body>

</html>